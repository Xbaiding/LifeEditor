window.__require=function t(e,o,i){function n(s,a){if(!o[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var p="function"==typeof __require&&__require;if(!a&&p)return p(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){return n(e[s][1][t]||t)},u,u.exports,t,e,o,i)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({AudioIndex:[function(t,e,o){"use strict";var i;cc._RF.push(e,"765bdewgORG/4F7nb8cRTzG","AudioIndex"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.COM_CLICK=0]="COM_CLICK",t[t.TAB_CLICK=1]="TAB_CLICK",t[t.ADD_ITEM=2]="ADD_ITEM"}(i||(i={})),o.default=i,cc._RF.pop()},{}],AudioMsg:[function(t,e,o){"use strict";cc._RF.push(e,"687c6P3NHZL4KIxy3hMXvK+","AudioMsg");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=function(t){function e(){var e=t.call(this)||this;return e.AudioClips=[],e}var o;return i(e,t),o=e,e.getInstance=function(){return null==this._instance&&(this._instance=new o),this._instance},e.prototype.__preload=function(){null==o._instance&&(o._instance=this)},e.prototype.playAudio=function(t,e){void 0===e&&(e=1),this.AudioClips[t]&&cc.audioEngine.play(this.AudioClips[t],!1,e)},n([a({type:cc.AudioClip})],e.prototype,"AudioClips",void 0),e=o=n([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],BaseComp:[function(t,e,o){"use strict";cc._RF.push(e,"9055aZbibNC0q8uNr/XZNJa","BaseComp");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator.ccclass,s=t("./EventMsg"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._register=function(t,e){s.default.on(t,e,this)},e.prototype._destroy=function(t,e){s.default.off(t,e,this)},e.prototype._pushEvent=function(t,e){s.default.emit(t,e)},e=n([r],e)}(cc.Component);o.default=a,cc._RF.pop()},{"./EventMsg":"EventMsg"}],BaseView:[function(t,e,o){"use strict";cc._RF.push(e,"1629cTglXJGo5peAUtkBvkK","BaseView");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,r.requireComponent),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onShow=function(){this.node.active=!0;var t=this.node.getComponent(cc.Animation);t&&t.play("show")},e.prototype.onHide=function(){var t=this.node.getComponent(cc.Animation);t?t.play("hide"):this._onHide()},e.prototype._onHide=function(){this.node.active=!1},e=n([s,a(cc.Animation)],e)}(t("./BaseComp").default);o.default=c,cc._RF.pop()},{"./BaseComp":"BaseComp"}],ClickAudio:[function(t,e,o){"use strict";cc._RF.push(e,"a585bqFrYlHSrAvOKF9tHS3","ClickAudio");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=r.menu,p=t("./AudioMsg"),u=t("./AudioIndex"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._audiotype=u.default.COM_CLICK,e}return i(e,t),Object.defineProperty(e.prototype,"AudioType",{get:function(){return this._audiotype},set:function(t){this._audiotype=t},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this._play,this)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_END,this._play,this)},e.prototype._play=function(){p.default.getInstance().playAudio(this._audiotype)},n([a],e.prototype,"_audiotype",void 0),n([a({type:cc.Enum(u.default)})],e.prototype,"AudioType",null),e=n([s,c("Extend/ClickAudio")],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./AudioIndex":"AudioIndex","./AudioMsg":"AudioMsg"}],Config:[function(t,e,o){"use strict";cc._RF.push(e,"1a623RY5jlL85/ku62VQery","Config"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.Back=0]="Back",t[t.Froe=1]="Froe"}(o.LayerType||(o.LayerType={})),function(t){t[t.Road=0]="Road",t[t.Build=1]="Build",t[t.Tree=2]="Tree",t[t.Crop=3]="Crop",t[t.Device=4]="Device",t[t.Content=5]="Content",t[t.Animal=6]="Animal",t[t.Other=7]="Other",t[t.Biome=8]="Biome"}(o.ItemType||(o.ItemType={})),function(t){t[t.DEF=-1]="DEF",t[t.TYPE_0=0]="TYPE_0",t[t.TYPE_1=1]="TYPE_1",t[t.TYPE_2=2]="TYPE_2",t[t.TYPE_3=3]="TYPE_3",t[t.TYPE_4=4]="TYPE_4",t[t.TYPE_5=5]="TYPE_5",t[t.TYPE_6=6]="TYPE_6",t[t.TYPE_E=7]="TYPE_E"}(o.BiomeType||(o.BiomeType={})),o.PondId=1e4,o.CUSTOM_INDEX=-2,cc._RF.pop()},{}],CustomItemView:[function(t,e,o){"use strict";cc._RF.push(e,"7f53bctb6dNqaxn/ThjTZks","CustomItemView");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=t("../Eventdef"),p=t("../Framework/BaseView"),u=t("../GameMsg/MapItemMsg"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Sprite=null,e.EditName=null,e.EditItemID=null,e.DiffX=null,e.DiffY=null,e.AddBtn=null,e.AlterBtn=null,e.DelBtn=null,e._ItemType=-1,e._ItemName="",e._ItemID=-1,e._DiffX=0,e._DiffY=-44,e._IsAlter=!1,e}return i(e,t),e.prototype.onLoad=function(){this._register(c.default.EVENT_SHOW_CUSTOM,this._onShowView),this._register(c.default.EVENT_DEL_CUSTOM,this._onHideView),null!=this.Sprite&&this.Sprite.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this)},e.prototype.onDestroy=function(){this._destroy(c.default.EVENT_SHOW_CUSTOM,this._onShowView),this._destroy(c.default.EVENT_DEL_CUSTOM,this._onHideView)},e.prototype._onShowView=function(t){this.onShow(),this._ItemType=t.ItemType,t.ItemName&&(this._ItemName=t.ItemName),this._ItemID=-1,t.ItemID&&(this._ItemID=t.ItemID),t.DiffX&&(this._DiffX=t.DiffX),t.DiffY&&(this._DiffY=t.DiffY),this._updateView()},e.prototype._onHideView=function(t){if("Confirm"==t){var e=new u.ItemInfo;e.index=-1,e.itemID=this._ItemID,this._pushEvent(c.default.EVENT_ALTER_CUSTOM,e),u.MapItemMsg.getInstance().alterCutomItem(e),this.onClose()}},e.prototype._updateView=function(){this.Sprite.node.active=!1,this.AddBtn.active=!1,this._IsAlter=-1!=this._ItemID,this.AlterBtn.active=this._IsAlter,this.DelBtn.active=this._IsAlter,this.EditItemID.string="",this._IsAlter?(this.EditName.string=this._ItemName,this.EditItemID.string=String(this._ItemID),this._downloadFile(),this.EditItemID.node.pauseSystemEvents(!1)):(this._DiffX=0,this._DiffY=-44,this._ItemID=-1,this._ItemName="",this.EditName.string="",this.EditItemID.string="",this.EditItemID.node.resumeSystemEvents(!1)),this.DiffX&&(this.DiffX.string=String(this._DiffX)),this.DiffY&&(this.DiffY.string=String(this._DiffY)),this.Sprite.node.setPosition(this._DiffX,this._DiffY)},e.prototype._onTouchMove=function(t){var e=t.getDelta();if(0!=e.x||0!=e.y){var o=this.Sprite.node.getPosition();o=o.addSelf(e),this.Sprite.node.setPosition(o),this._DiffX=Math.floor(o.x),this._DiffY=Math.floor(o.y),this.DiffX&&(this.DiffX.string=String(this._DiffX)),this.DiffY&&(this.DiffY.string=String(this._DiffY))}},e.prototype._downloadFile=function(){if(-1!=this._ItemID){var t=this._ItemID+".png",e=jsb.fileUtils.getWritablePath()+"Custom/";if(jsb.fileUtils.isDirectoryExist(e)||jsb.fileUtils.createDirectory(e),e+=t,jsb.fileUtils.isFileExist(e))this._setSpriteFrame(e);else{var o="http://guide.onehouronelife.cn/static/sprites/obj_"+t,i=cc.loader.getXMLHttpRequest();i.open("GET",o,!0),i.responseType="arraybuffer",i.onload=function(){if(200==i.status){var t=new Uint8Array(i.response);137==t[0]&&(jsb.fileUtils.writeDataToFile(t,e),this._setSpriteFrame(e))}}.bind(this),i.send()}}},e.prototype._setSpriteFrame=function(t){cc.loader.load({url:t,type:"image"},function(t,e){if(t)cc.log(t);else if(this.Sprite){var o=new cc.SpriteFrame(e);this.Sprite.spriteFrame=o,this.Sprite.node.active=!0,this.AddBtn.active=!this._IsAlter}}.bind(this))},e.prototype.onEditor=function(t,e){if("name"==e)this._ItemName=t.string;else{var o=Number(t.string);if(null==o)return;"itemId"==e?(this._ItemID=o,this._downloadFile()):"diffX"==e?(this._DiffX=o,this.Sprite.node.setPosition(this._DiffX,this._DiffY)):"diffY"==e&&(this._DiffY=o,this.Sprite.node.setPosition(this._DiffX,this._DiffY))}},e.prototype.openURL=function(){cc.sys.openURL("http://guide.onehouronelife.cn/")},e.prototype.onConfirmBtn=function(){var t=new u.ItemInfo;t.index=this._ItemID,t.itemType=this._ItemType,t.itemID=this._ItemID,t.layerType=1,t.removeBack=0,t.x=this._DiffX,t.y=this._DiffY,t.arY=0,t.scale=.78,t.name=this.EditName.string,t.Custom=1,this._IsAlter?u.MapItemMsg.getInstance().alterCutomItem(t):u.MapItemMsg.getInstance().addCustomItem(t),u.MapItemMsg.getInstance().saveCustomData(),this._pushEvent(this._IsAlter?c.default.EVENT_ALTER_CUSTOM:c.default.EVENT_ADD_CUSTOM,t),this.onHide()},e.prototype.onDelBtn=function(){this._pushEvent(c.default.EVENT_SHOW_PROMPT,{info:"\u662f\u5426\u786e\u8ba4\u5220\u9664?",event:c.default.EVENT_DEL_CUSTOM})},e.prototype.onClose=function(){this.node.active=!1},n([a(cc.Sprite)],e.prototype,"Sprite",void 0),n([a(cc.EditBox)],e.prototype,"EditName",void 0),n([a(cc.EditBox)],e.prototype,"EditItemID",void 0),n([a(cc.EditBox)],e.prototype,"DiffX",void 0),n([a(cc.EditBox)],e.prototype,"DiffY",void 0),n([a(cc.Node)],e.prototype,"AddBtn",void 0),n([a(cc.Node)],e.prototype,"AlterBtn",void 0),n([a(cc.Node)],e.prototype,"DelBtn",void 0),e=n([s],e)}(p.default);o.default=h,cc._RF.pop()},{"../Eventdef":"EventDef","../Framework/BaseView":"BaseView","../GameMsg/MapItemMsg":"MapItemMsg"}],EventDef:[function(t,e,o){"use strict";var i;cc._RF.push(e,"0b5ce7G5rpDtq9YL0Rd4LsU","EventDef"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.EVENT_DELFILE_CONFIRM=0]="EVENT_DELFILE_CONFIRM",t[t.EVENT_NEWMAP_CONFIRM=1]="EVENT_NEWMAP_CONFIRM",t[t.EVENT_CAPTURE_SIZE=2]="EVENT_CAPTURE_SIZE",t[t.EVENT_SET_DEFGROUND=3]="EVENT_SET_DEFGROUND",t[t.EVENT_SCALE_MAP=4]="EVENT_SCALE_MAP",t[t.EVENT_HIDE_FRAME=5]="EVENT_HIDE_FRAME",t[t.EVENT_SET_MINIMAP=6]="EVENT_SET_MINIMAP",t[t.EVENT_MOVE_MAP=7]="EVENT_MOVE_MAP",t[t.EVENT_SELECT_TYPE=8]="EVENT_SELECT_TYPE",t[t.EVENT_SELECT_ITEM=9]="EVENT_SELECT_ITEM",t[t.EVENT_SELECT_MAPPOS=10]="EVENT_SELECT_MAPPOS",t[t.EVENT_CLICK_OPERATE=11]="EVENT_CLICK_OPERATE",t[t.EVENT_MOME_ITEM_ON=12]="EVENT_MOME_ITEM_ON",t[t.EVENT_MOME_ITEM_END=13]="EVENT_MOME_ITEM_END",t[t.EVENT_SHOW_PROMPT=14]="EVENT_SHOW_PROMPT",t[t.EVENT_HIDE_PROMPT=15]="EVENT_HIDE_PROMPT",t[t.EVENT_SHOW_SIZEVIEW=16]="EVENT_SHOW_SIZEVIEW",t[t.EVENT_SHOW_CUSTOM=17]="EVENT_SHOW_CUSTOM",t[t.EVENT_ADD_CUSTOM=18]="EVENT_ADD_CUSTOM",t[t.EVENT_DEL_CUSTOM=19]="EVENT_DEL_CUSTOM",t[t.EVENT_ALTER_CUSTOM=20]="EVENT_ALTER_CUSTOM",t[t.EVENT_RECORD_OPERATE=21]="EVENT_RECORD_OPERATE",t[t.EVENT_SAVE_FILE=22]="EVENT_SAVE_FILE",t[t.EVENT_SAVE_IMAGE=23]="EVENT_SAVE_IMAGE"}(i||(i={})),o.default=i,cc._RF.pop()},{}],EventMsg:[function(t,e,o){"use strict";cc._RF.push(e,"ec7a2xSaPRKuIa32ZkzydyA","EventMsg");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(o,"__esModule",{value:!0});var n=function(t){function e(){return t.call(this)||this}return i(e,t),Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e._instance=null,e}(cc.EventTarget);o.default=n.instance,cc._RF.pop()},{}],ExButton:[function(t,e,o){"use strict";cc._RF.push(e,"e6d06H8IklLWYjC9BV/ERWW","ExButton");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r,s=cc._decorator,a=s.ccclass,c=s.disallowMultiple,p=s.property,u=s.menu;(function(t){t[t.NORMAL=0]="NORMAL",t[t.HOVER=1]="HOVER",t[t.PRESSED=2]="PRESSED",t[t.DISABLED=3]="DISABLED"})(r||(r={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e._interactable=!0,e.normalMaterial=null,e.pressedMaterial=null,e.hoverMaterial=null,e.disabledMaterial=null,e.clickEvents=[],e._pressed=!1,e._hovered=!1,e}return i(e,t),Object.defineProperty(e.prototype,"interactable",{get:function(){return this._interactable},set:function(t){this._interactable=t,this._updateState()},enumerable:!0,configurable:!0}),e.prototype.__preload=function(){this._resetState()},e.prototype._resetState=function(){this._pressed=!1,this._hovered=!1,this._updateState()},e.prototype.onEnable=function(){this._registerNodeEvent()},e.prototype.onDisable=function(){this._resetState(),this._unregisterNodeEvent()},e.prototype._registerNodeEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.node.on(cc.Node.EventType.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this._onMouseMoveOut,this)},e.prototype._unregisterNodeEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.node.off(cc.Node.EventType.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this._onMouseMoveOut,this)},e.prototype._onTouchBegan=function(t){this.interactable&&this.enabledInHierarchy&&(this._pressed=!0,this._updateState(),t.stopPropagation())},e.prototype._onTouchMove=function(t){if(this.interactable&&this.enabledInHierarchy&&this._pressed){var e=t.touch;this.node._hitTest(e.getLocation())?r.PRESSED:r.NORMAL;t.stopPropagation()}},e.prototype._onTouchEnded=function(t){this.interactable&&this.enabledInHierarchy&&(this._pressed&&(cc.Component.EventHandler.emitEvents(this.clickEvents,t),this.node.emit("click",this)),this._pressed=!1,this._updateState(),t.stopPropagation())},e.prototype._onTouchCancel=function(){this.interactable&&this.enabledInHierarchy&&(this._pressed=!1,this._updateState())},e.prototype._onMouseMoveIn=function(t){!this._pressed&&this.interactable&&this.enabledInHierarchy&&(this._hovered||(this._hovered=!0,this._updateState()))},e.prototype._onMouseMoveOut=function(){this._hovered&&(this._hovered=!1,this._updateState())},e.prototype._updateState=function(){if(this.target){var t=this._getButtonState(),e=this._getStateMaterial(t);e&&this.target.setMaterial(0,e)}},e.prototype._getButtonState=function(){return this.interactable?this._pressed?r.PRESSED:this._hovered?r.HOVER:r.NORMAL:r.DISABLED},e.prototype._getStateMaterial=function(t){switch(t){case r.NORMAL:return this.normalMaterial;case r.HOVER:return this.hoverMaterial;case r.PRESSED:return this.pressedMaterial;case r.DISABLED:return this.disabledMaterial}},n([p({type:cc.Sprite})],e.prototype,"target",void 0),n([p({tooltip:"\u6309\u94ae\u4e8b\u4ef6\u662f\u5426\u88ab\u54cd\u5e94\uff0c\u5982\u679c\u4e3a false\uff0c\u5219\u6309\u94ae\u5c06\u88ab\u7981\u7528\u3002"})],e.prototype,"interactable",null),n([p({type:cc.Material,tooltip:"\u666e\u901a\u72b6\u6001\u6309\u94ae\u6750\u8d28"})],e.prototype,"normalMaterial",void 0),n([p({type:cc.Material,tooltip:"\u6309\u4e0b\u72b6\u6001\u6309\u94ae\u6750\u8d28"})],e.prototype,"pressedMaterial",void 0),n([p({type:cc.Material,tooltip:"\u60ac\u505c\u72b6\u6001\u6309\u94ae\u6750\u8d28"})],e.prototype,"hoverMaterial",void 0),n([p({type:cc.Material,tooltip:"\u7981\u7528\u72b6\u6001\u6309\u94ae\u6750\u8d28"})],e.prototype,"disabledMaterial",void 0),n([p({type:cc.Component.EventHandler,tooltip:"\u6309\u94ae\u7684\u70b9\u51fb\u4e8b\u4ef6"})],e.prototype,"clickEvents",void 0),e=n([a,c,u("Extend/ExButton")],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],FileItem:[function(t,e,o){"use strict";cc._RF.push(e,"7b195deyQdMz60f711x7VXS","FileItem");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SecletBtn=null,e.NameLabel=null,e.WidthLabel=null,e.HightLabel=null,e._itemIndex=0,e}return i(e,t),Object.defineProperty(e.prototype,"Secelt",{get:function(){return null!=this.SecletBtn&&!this.SecletBtn.interactable},set:function(t){null!=this.SecletBtn&&(this.SecletBtn.interactable=!t)},enumerable:!0,configurable:!0}),e.prototype.onSeceltItem=function(){this._seceltCallBack(this._itemIndex)},e.prototype._setItemIndex=function(t){this._itemIndex=t,this._itemIndex%2==0&&(this.SecletBtn.normalColor=this.SecletBtn.hoverColor)},n([a(cc.Button)],e.prototype,"SecletBtn",void 0),n([a(cc.Label)],e.prototype,"NameLabel",void 0),n([a(cc.Label)],e.prototype,"WidthLabel",void 0),n([a(cc.Label)],e.prototype,"HightLabel",void 0),n([a()],e.prototype,"Secelt",null),e=n([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],KeyComp:[function(t,e,o){"use strict";cc._RF.push(e,"65bf0q02LFH1rkKzoCOt/ED","KeyComp");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,t("./Framework/BaseComp")),c=t("./Eventdef"),p=cc.macro.KEY,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._ctrl=!1,e}return i(e,t),e.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyUp,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this._onKeyUp,this)},e.prototype._onKeyDown=function(t){switch(t.keyCode){case p.ctrl:case 91:this._ctrl=!0;break;case p.z:this._ctrl?this._pushEvent(c.default.EVENT_RECORD_OPERATE,"UnDo"):this._pushEvent(c.default.EVENT_RECORD_OPERATE,"ReDo");break;case p.a:case p.left:this._pushEvent(c.default.EVENT_MOVE_MAP,cc.v2(-10,0));break;case p.d:case p.right:this._pushEvent(c.default.EVENT_MOVE_MAP,cc.v2(10,0));break;case p.w:case p.up:this._pushEvent(c.default.EVENT_MOVE_MAP,cc.v2(0,10));break;case p.down:this._pushEvent(c.default.EVENT_MOVE_MAP,cc.v2(0,-10));break;case p.s:this._ctrl?this._pushEvent(c.default.EVENT_SAVE_FILE,-1):this._pushEvent(c.default.EVENT_MOVE_MAP,cc.v2(0,-10))}},e.prototype._onKeyUp=function(t){switch(t.keyCode){case p.ctrl:case 91:this._ctrl=!1;break;case p.c:this._pushEvent(c.default.EVENT_SELECT_ITEM,-1);break;case p.x:this._pushEvent(c.default.EVENT_HIDE_FRAME,null);break;case p.q:this._pushEvent(c.default.EVENT_SCALE_MAP,.9);break;case p.e:this._pushEvent(c.default.EVENT_SCALE_MAP,1.1)}},e=n([s],e)}(a.default);o.default=u,cc._RF.pop()},{"./Eventdef":"EventDef","./Framework/BaseComp":"BaseComp"}],ListContent:[function(t,e,o){"use strict";cc._RF.push(e,"d58d4JCj8lCtalgOHPm7LnR","ListContent");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=r.menu,p=r.requireComponent,u=cc.Node.EventType,h=t("./ListItem"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MoveCount=0,e._drawNodes=[],e._listItem=[],e}return i(e,t),e.prototype.onLoad=function(){if(this.MoveCount>0)for(var t=this.node.parent,e=0;e<this.MoveCount;e++){var o=new cc.Node;o.zIndex=100,o.parent=t,this._drawNodes[e]=o}},e.prototype.start=function(){},e.prototype.onEnable=function(){this.node.on(u.SIZE_CHANGED,this._sizeChanged,this)},e.prototype.onDisable=function(){this.node.off(u.SIZE_CHANGED,this._sizeChanged,this)},e.prototype._sizeChanged=function(){var t=this;this.scheduleOnce(function(){t._moveNode()},0)},e.prototype._moveNode=function(){for(var t=0,e=this._listItem;t<e.length;t++){if((r=e[t])&&r.node)for(var o=0;o<r.MoveNodes.length;++o){(a=r.MoveNodes[o]).parent=r._parent[o]}}this._listItem=[];var i=this.node.children;for(o=0;o<i.length;++o){var n=i[o];if(n.activeInHierarchy){var r;if(null==(r=n.getComponent(h.default)))continue;this._listItem.push(r),cc.log("_moveNode X[%d]",n.x);for(var s=0;s<r.MoveNodes.length;s++){var a;if(null!=(a=r.MoveNodes[s])){var c=r._getWorldSPos(s),p=this._drawNodes[s],u=p.convertToNodeSpace(c);a.parent=p,a.setPosition(u)}}}}},n([a({type:cc.Integer})],e.prototype,"MoveCount",void 0),e=n([s,p(cc.Layout),c("Extend/ListContent")],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./ListItem":"ListItem"}],ListItem:[function(t,e,o){"use strict";cc._RF.push(e,"6fe0bewR7pBYrEO2mi2MzrR","ListItem");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=r.menu,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MoveNodes=[],e._parent=[],e._oldPos=[],e}return i(e,t),e.prototype.onLoad=function(){for(var t=0;t<this.MoveNodes.length;t++){var e=this.MoveNodes[t];null!=e&&(this._parent[t]=e.parent,this._oldPos[t]=cc.v2(e.position))}},e.prototype._getWorldSPos=function(t){var e=this._oldPos[t];return this._parent[t].convertToWorldSpaceAR(e)},n([a({type:cc.Node})],e.prototype,"MoveNodes",void 0),e=n([s,c("Extend/ListItem")],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],LocalItem:[function(t,e,o){"use strict";cc._RF.push(e,"8583boWBBJMP5XphqiWKCQG","LocalItem");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=t("./MapItem"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onColor=null,e.offColor=null,e.MapItem=null,e._canbuild=!1,e}return i(e,t),Object.defineProperty(e.prototype,"CanBuild",{get:function(){return this._canbuild},set:function(t){this.node.color=t?this.onColor:this.offColor,this._canbuild=t},enumerable:!0,configurable:!0}),e.prototype.copyItem=function(t){this.MapItem.ItemPos=t.ItemPos,this.MapItem.ItemARPos=t.ItemARPos,this.MapItem.sprite.spriteFrame=t.sprite.spriteFrame,this.MapItem.sprite.node.color=t.sprite.node.color},e.prototype.setPosition=function(t){this.node.setPosition(t)},n([a(cc.Color)],e.prototype,"onColor",void 0),n([a(cc.Color)],e.prototype,"offColor",void 0),n([a(c.default)],e.prototype,"MapItem",void 0),n([a],e.prototype,"CanBuild",null),e=n([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./MapItem":"MapItem"}],MapCamera:[function(t,e,o){"use strict";cc._RF.push(e,"022d0gsJc5CjaiV8UFX2dW1","MapCamera");var i,n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.Null=0]="Null",t[t.Touch=1]="Touch",t[t.Move=2]="Move",t[t.Scale=3]="Scale",t[t.Hold=4]="Hold",t[t.HoldMove=5]="HoldMove",t[t.HoldEnd=6]="HoldEnd"}(i=o.OperateType||(o.OperateType={}));var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(Object);o.CameraEvent=s;var a=cc._decorator,c=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Camera=null,e.Sensitivity=0,e.HoldTime=.5,e.MinScale=1,e.MaxScale=2,e.TouchEvent=[],e._beginPos=null,e._touchPos=[],e._beginScale=1,e._curScale=1,e._canScale=!0,e._distance_before=-1,e._holdTimeEclipse=-1,e._holdClick=!1,e._opType=i.Null,e}return n(e,t),e.prototype._changOpType=function(t){this._opType=t,this._holdClick=t==i.Touch,this._holdTimeEclipse=0},e.prototype._isHold=function(){return this._opType==i.Hold||this._opType==i.HoldMove},e.prototype.onLoad=function(){this._touchPos[0]={id:-1,pos:cc.v2(0,0)},this._touchPos[1]={id:-1,pos:cc.v2(0,0)},this._curScale=1/this.Camera.zoomRatio,this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.node.on(cc.Node.EventType.MOUSE_WHEEL,this._onMouseWheel,this),this.MinScale==this.MaxScale&&(this._canScale=!1)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.node.off(cc.Node.EventType.MOUSE_WHEEL,this._onMouseWheel,this)},e.prototype._onTouchStart=function(t){if(!this._isHold()&&(-1==this._touchPos[0].id&&-1==this._touchPos[1].id&&this._changOpType(i.Touch),this._beginPos=t.getLocation(),this._canScale)){if(-1==this._touchPos[0].id)this._touchPos[0]={id:t.getID(),pos:this._beginPos};else{if(-1!=this._touchPos[1].id)return;this._touchPos[1]={id:t.getID(),pos:this._beginPos}}if(-1!=this._touchPos[0].id&&-1!=this._touchPos[1].id){this._beginScale=this.Camera.zoomRatio;var e=this._touchPos[0].pos,o=this._touchPos[1].pos;this._distance_before=this._getDistance(e,o),this._changOpType(i.Scale)}}},e.prototype._onTouchMove=function(t){var e=t.getDelta();if(0!=e.x||0!=e.y){if(this._isHold())return this._opType=i.HoldMove,void this._onEventHandler(t.getLocation());if(!(Math.abs(e.x)+Math.abs(e.y)<this.Sensitivity))switch(t.getID()==this._touchPos[0].id?this._touchPos[0].pos=t.getLocation():t.getID()==this._touchPos[1].id&&(this._touchPos[1].pos=t.getLocation()),this._opType){case i.Touch:case i.Move:this.setPosition(e),this._changOpType(i.Move);break;case i.Scale:var o=this._getDistance(this._touchPos[0].pos,this._touchPos[1].pos);this._setScale(o/this._distance_before)}}},e.prototype._onTouchEnd=function(t){t.getID()==this._touchPos[0].id?this._touchPos[0].id=-1:t.getID()==this._touchPos[1].id&&(this._touchPos[1].id=-1),-1==this._touchPos[0].id&&-1==this._touchPos[1].id&&("touchend"==t.type&&this._isHold()&&this._changOpType(i.HoldEnd),this._onEventHandler(t.getLocation()),this._changOpType(i.Null))},e.prototype._onTouchCancel=function(){this._changOpType(i.Null),this._touchPos[0].id=-1,this._touchPos[1].id=-1},e.prototype._onMouseWheel=function(t){this.setScale(1+.1*t.getScrollY())},e.prototype.initCamera=function(){this.Camera.zoomRatio=1,this.Camera.node.setPosition(cc.v2())},e.prototype.setPosition=function(t){t.mulSelf(this._curScale);var e=this.Camera.node.position;this.Camera.node.setPosition(e.sub(t))},e.prototype.setScale=function(t){this._beginScale=this.Camera.zoomRatio,this._setScale(t)},e.prototype._setScale=function(t){var e=this._beginScale*t;e<=this.MinScale?e=this.MinScale:e>=this.MaxScale&&(e=this.MaxScale),this._curScale=1/e,this.Camera.zoomRatio=e},e.prototype._getDistance=function(t,e){var o=Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2);return Math.sqrt(o)},e.prototype.update=function(t){this._opType==i.Touch&&this._holdClick&&this._holdTimeEclipse<this.HoldTime&&(this._holdTimeEclipse+=t,this._holdTimeEclipse>this.HoldTime&&(this._changOpType(i.Hold),this._onEventHandler(this._beginPos)))},e.prototype._onEventHandler=function(t){if(0!=this.TouchEvent.length){var e=this.Camera.getScreenToWorldPoint(t);cc.Component.EventHandler.emitEvents(this.TouchEvent,{pos:e,type:this._opType,scale:this._curScale})}},r([p(cc.Camera)],e.prototype,"Camera",void 0),r([p({type:cc.Float,min:0,max:30,slide:!0,displayName:"\u79fb\u52a8\u7075\u654f\u5ea6"})],e.prototype,"Sensitivity",void 0),r([p({type:cc.Float,min:.5,max:2,slide:!0,displayName:"\u957f\u6309\u54cd\u5e94\u65f6\u95f4"})],e.prototype,"HoldTime",void 0),r([p({displayName:"\u6700\u5c0f\u7f29\u653e\u503c"})],e.prototype,"MinScale",void 0),r([p({displayName:"\u6700\u5927\u7f29\u653e\u503c"})],e.prototype,"MaxScale",void 0),r([p({type:cc.Component.EventHandler,displayName:"\u54cd\u5e94\u4e8b\u4ef6"})],e.prototype,"TouchEvent",void 0),e=r([c],e)}(cc.Component);o.MapCamera=u,cc._RF.pop()},{}],MapCapture:[function(t,e,o){"use strict";cc._RF.push(e,"a34e6Vd1zFEWbpNpeN1bIgl","MapCapture");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=t("../EventDef"),p=t("../Framework/BaseComp"),u=t("../GameMsg/SceneMsg"),h=t("./wechat.js"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mapCamera=null,e._mapname=null,e._captrueSize=2e3,e._texture=null,e}return i(e,t),e.prototype.onLoad=function(){this.node.active=!1,this._register(c.default.EVENT_CAPTURE_SIZE,this._setCaptrueSize),this._register(c.default.EVENT_SAVE_IMAGE,this._captureMap)},e.prototype.onDestroy=function(){this._destroy(c.default.EVENT_CAPTURE_SIZE,this._setCaptrueSize),this._destroy(c.default.EVENT_SAVE_IMAGE,this._captureMap)},e.prototype._setCaptrueSize=function(t){this._captrueSize=t},e.prototype._captureMap=function(t){var e=this;if("Confirm"==t){var o=1,i=100*u.default.mapSize.width,n=100*u.default.mapSize.height;i>n?i>this._captrueSize&&(o=this._captrueSize/i):n>this._captrueSize&&(o=this._captrueSize/n),i*=o,n*=o,o*=cc.visibleRect.height/n,this.mapCamera.zoomRatio=o,this.node.active=!0,this.mapCamera.targetTexture=null,this._texture=new cc.RenderTexture,this._texture.update({format:cc.Texture2D.PixelFormat.RGB565}),this._texture.initWithSize(i,n),this.mapCamera.targetTexture=this._texture,this._pushEvent(c.default.EVENT_SHOW_PROMPT,{info:"\u6b63\u5728\u751f\u6210\u56fe\u7247\u8bf7\u7b49\u5f85",type:2}),this.scheduleOnce(function(){cc.sys.isBrowser||cc.sys.platform===cc.sys.WECHAT_GAME?e._saveImageWeb():e._saveToFile()},0)}},e.prototype._saveToFile=function(){var t=this._mapname+".jpg",e=jsb.fileUtils.getWritablePath()+t,o="\u56fe\u7247\u751f\u6210\u5931\u8d25";if(this._saveImage(e)&&(o="\u56fe\u7247\u751f\u6210\u6210\u529f",cc.sys.platform==cc.sys.ANDROID)){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Utils","saveImage","(Ljava/lang/String;Ljava/lang/String;)Z",e,t);o="\u56fe\u7247\u5bfc\u51fa\u6210\u529f",jsb.fileUtils.removeFile(e)}this._pushEvent(c.default.EVENT_SHOW_PROMPT,{info:o,type:1}),this.node.active=!1},e.prototype._saveImage=function(t){var e=this._texture.width,o=this._texture.height,i=!0,n=window.__gl,r=n.getParameter(n.FRAMEBUFFER_BINDING);return n.bindFramebuffer(n.FRAMEBUFFER,this._texture._framebuffer._glID),n.readPixels(0,0,e,o,n.RGBA,n.UNSIGNED_BYTE,t),n.bindFramebuffer(n.FRAMEBUFFER,r),i},e.prototype._saveImageWeb=function(){var t=document.createElement("canvas"),e=t.getContext("2d"),o=t.width=this._texture.width,i=t.height=this._texture.height;t.width=this._texture.width,t.height=this._texture.height;for(var n=this._texture.readPixels(),r=4*o,s=0;s<i;s++){for(var a=i-1-s,c=e.createImageData(o,1),p=a*o*4,u=0;u<r;u++)c.data[u]=n[p+u];e.putImageData(c,0,s)}if(cc.sys.platform===cc.sys.WECHAT_GAME)h(t);else if(cc.sys.isMobile){var l=t.toDataURL("image/jpeg");window.open("about:blank","image from canvas").document.write("<img src='"+l+"' alt='from canvas'/>")}else{var _=function(t){for(var e=atob(t.split(",")[1]),o=e.length,i=new Uint8Array(o),n=0;n<o;n++)i[n]=e.charCodeAt(n);return new Blob([i])}(t.toDataURL("image/jpeg")),f=document.createElement("a");f.download=this._mapname+".jpeg",f.innerHTML="download",f.href=URL.createObjectURL(_);var d=new MouseEvent("click",{bubbles:!1,cancelable:!1});f.dispatchEvent(d)}},n([a(cc.Camera)],e.prototype,"mapCamera",void 0),e=n([s],e)}(p.default);o.default=l,cc._RF.pop()},{"../EventDef":"EventDef","../Framework/BaseComp":"BaseComp","../GameMsg/SceneMsg":"SceneMsg","./wechat.js":"wechat"}],MapCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"521f25T+dlK6bB/5OJ5CkfQ","MapCtrl");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=t("../GameMsg/SceneMsg"),p=t("../Framework/BaseComp"),u=t("./MapItem"),h=t("./PondItem"),l=t("../Config"),_=t("../GameMsg/MapItemMsg"),f=t("../GameMsg/MapRecordMsg"),d=t("./MapView"),y=t("./MapGround"),m=t("./LocalItem"),v=t("../Eventdef"),E=t("../GameMsg/MapFile"),I=function(){function t(){this.x=-1,this.y=-1,this.mapItem=[null,null],this.ground=-1}return t.prototype.add=function(t,e){this.mapItem[t]=e},t.prototype.get=function(t){return this.mapItem[t]},t.prototype.remove=function(t){this.mapItem[t]=null},t}(),g=function(){function t(){this.data={}}return t.prototype.put=function(t,e){this.data[t]=e},t.prototype.clear=function(){this.data={}},t.prototype.get=function(t,e,o){void 0===o&&(o=!1);var i=(t<<8)+e;if(this.data[i])return this.data[i];if(o){var n=new I;return n.x=t,n.y=e,this.put(i,n),n}return null},t.prototype.remove=function(t,e){var o=(t<<8)+e;this.data[o]&&delete this.data[o]},t.prototype.eachMap=function(t){for(var e in this.data)this.data.hasOwnProperty(e)&&t(this.data[e])},t}(),M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MapItem=null,e.PondItem=null,e.MapView=null,e.MapGround=null,e.LocalItem=null,e._fileName="",e._curItemType=l.ItemType.Road,e._curItemIndex=-1,e._mapItemData=null,e._defGround=l.BiomeType.TYPE_0,e._widthCount=0,e._highCount=0,e._curMoveItem=null,e._setTiledInfo=function(t){for(var e=t.x,o=t.y,i=0,n=t.itemID;i<n.length;i++){var r=n[i];if(0!=r){var s=_.MapItemMsg.getInstance().getItemByItemId(r);s&&(this._getItem(s.layerType,e,o),this._addMapItem(s,e,o))}}-1!=t.ground&&this._setMapGround(t.ground,e,o)},e}return i(e,t),e.prototype.onLoad=function(){this._mapItemData=new g,this._register(v.default.EVENT_SELECT_TYPE,this._setCurItemType),this._register(v.default.EVENT_SELECT_ITEM,this._setCurItemIndex),this._register(v.default.EVENT_MOME_ITEM_ON,this._onMoveItem),this._register(v.default.EVENT_MOME_ITEM_END,this._setMoveItem),this._register(v.default.EVENT_SAVE_FILE,this._saveMapToFile),this._register(v.default.EVENT_ALTER_CUSTOM,this._alterMapLayer),this._register(v.default.EVENT_SELECT_MAPPOS,this._SelectMapPos),this._register(v.default.EVENT_CLICK_OPERATE,this._clickMapOperate),this._register(v.default.EVENT_RECORD_OPERATE,this._doRecordOperate),this._register(v.default.EVENT_SET_DEFGROUND,this._setMapDefGround)},e.prototype.onDestroy=function(){this._destroy(v.default.EVENT_SELECT_TYPE,this._setCurItemType),this._destroy(v.default.EVENT_SELECT_ITEM,this._setCurItemIndex),this._destroy(v.default.EVENT_MOME_ITEM_ON,this._onMoveItem),this._destroy(v.default.EVENT_MOME_ITEM_END,this._setMoveItem),this._destroy(v.default.EVENT_SAVE_FILE,this._saveMapToFile),this._destroy(v.default.EVENT_ALTER_CUSTOM,this._alterMapLayer),this._destroy(v.default.EVENT_SELECT_MAPPOS,this._SelectMapPos),this._destroy(v.default.EVENT_CLICK_OPERATE,this._clickMapOperate),this._destroy(v.default.EVENT_RECORD_OPERATE,this._doRecordOperate),this._destroy(v.default.EVENT_SET_DEFGROUND,this._setMapDefGround)},e.prototype.start=function(){var t={name:c.default.mapName,width:c.default.mapSize.width,height:c.default.mapSize.height};this._mapItemData.clear(),this._fileName=t.name,this._widthCount=t.width,this._highCount=t.height,this._defGround=l.BiomeType.TYPE_0,this.MapView._initMap(t),this.MapGround._initGround(c.default.mapSize),this._readMapForFile(),f.MapRecordMsg.getInstance().clearRecord()},e.prototype._setCurItemType=function(t){this._curItemType=t},e.prototype._setCurItemIndex=function(t){t!=l.CUSTOM_INDEX&&(this._curItemIndex=t)},e.prototype._clickMapOperate=function(t){if(-1!=this._curItemIndex){var e=this._getItem(l.LayerType.Froe,t.x,t.y);null==e&&(e=this._getItem(l.LayerType.Back,t.x,t.y)),null!=e?(e.node.opacity=125,this._curMoveItem=e,this.LocalItem.node.active=!0,this.LocalItem.CanBuild=!0,this.LocalItem.copyItem(e),this.LocalItem.setPosition(e.node.position)):this._SelectMapPos(t)}else this._SelectMapPos(t)},e.prototype._onMoveItem=function(t){var e=this._curMoveItem.LayerType;if(this._getItem(e,t.x,t.y)?this.LocalItem.CanBuild=!1:this.LocalItem.CanBuild=!0,this._getItem(e,t.x,t.y))this.LocalItem.CanBuild=!1;else if(e==l.LayerType.Back){var o=this._getItem(l.LayerType.Froe,t.x,t.y);if(null!=o)1==_.MapItemMsg.getInstance().getItemByItemId(o.ItemID).removeBack&&(this.LocalItem.CanBuild=!1)}else{if(1==_.MapItemMsg.getInstance().getItemByItemId(this._curMoveItem.ItemID).removeBack)this._getItem(l.LayerType.Back,t.x,t.y)&&(this.LocalItem.CanBuild=!1)}},e.prototype._setMoveItem=function(t){if(this._curMoveItem&&(this._curMoveItem.node.opacity=255),null!=t&&(this._onMoveItem(t),this.LocalItem.CanBuild)){var e=new f.RecordInfo(f.RecordType.MoveItem,this._curMoveItem.LayerType,t.x,t.y,this._curMoveItem._x,this._curMoveItem._y);f.MapRecordMsg.getInstance().pushRecord(e),this._moveMapItem(this._curMoveItem.LayerType,t.x,t.y,this._curMoveItem._x,this._curMoveItem._y)}},e.prototype._moveMapItem=function(t,e,o,i,n){var r=this._mapItemData.get(i,n);this._mapItemData.get(e,o,!0).mapItem[t]=r.mapItem[t],r.mapItem[t]=null,this._curMoveItem._setPosition(e,o)},e.prototype._SelectMapPos=function(t){if(this._curItemType!=l.ItemType.Biome||-1==this._curItemIndex)if(-1!=this._curItemIndex){var e=_.MapItemMsg.getInstance().getItemWithTypeByIndx(this._curItemType,this._curItemIndex),o=new f.RecordInfo(f.RecordType.AddItem,e.itemID,t.x,t.y);if(!this._removeOldItem(e,t,o)){this._addMapItem(e,t.x,t.y);var i=this._getItem(e.layerType,t.x,t.y);this.MapView._playAddAction(i.node),f.MapRecordMsg.getInstance().pushRecord(o)}}else{var n=-1,r=this._getItem(l.LayerType.Froe,t.x,t.y);if(r)n=r.ItemID,this._removeItem(l.LayerType.Froe,t.x,t.y);else{var s=this._getItem(l.LayerType.Back,t.x,t.y);s&&(n=s.ItemID,this._removeItem(l.LayerType.Back,t.x,t.y))}if(-1!=n){var a=new f.RecordInfo(f.RecordType.DelItem,n,t.x,t.y);f.MapRecordMsg.getInstance().pushRecord(a)}}else{var c=this._getGroundType(t.x,t.y);if(-1==c&&this._curItemIndex==this._defGround)return;if(c!=this._curItemIndex){this._setMapGround(this._curItemIndex,t.x,t.y);var p=new f.RecordInfo(f.RecordType.SetGround,this._curItemIndex,t.x,t.y,c);f.MapRecordMsg.getInstance().pushRecord(p)}}},e.prototype._setMapDefGround=function(t){this._defGround=t;for(var e=0;e<this._highCount;e++)for(var o=0;o<this._widthCount;o++){-1==this._getGroundType(o,e)&&this.MapGround._onSetGround(this._defGround,o,e)}},e.prototype._getGroundType=function(t,e){var o=this._mapItemData.get(t,e);return null==o?l.BiomeType.DEF:o.ground},e.prototype._setMapGround=function(t,e,o){this._mapItemData.get(e,o,!0).ground=t,t==l.BiomeType.DEF?this.MapGround._onSetGround(this._defGround,e,o):this.MapGround._onSetGround(t,e,o)},e.prototype._addMapItem=function(t,e,o){if(null!=t){var i;if(null==(i=t.itemID==l.PondId?cc.instantiate(this.PondItem):cc.instantiate(this.MapItem)))return null;var n=i.getComponent(u.default);if(null!=n)n.initMapItem(t,e,o),this._mapItemData.get(e,o,!0).add(t.layerType,n),this.MapView._addMapItem(t.layerType,i),t.itemID==l.PondId&&this._updatePond(n.node,!0)}},e.prototype._updatePond=function(t,e){var o=t.getComponent(h.default);null!=o&&(this._updateNearPond(o._x-1,o._y-1,"RightDown",e)&&(o._leftUp=!0),this._updateNearPond(o._x,o._y-1,"MiddleDown",e)&&(o._middleUp=!0),this._updateNearPond(o._x+1,o._y-1,"LeftDown",e)&&(o._rightUp=!0),this._updateNearPond(o._x-1,o._y,"RightMiddle",e)&&(o._leftMiddle=!0),this._updateNearPond(o._x+1,o._y,"LeftMiddle",e)&&(o._rightMiddle=!0),this._updateNearPond(o._x-1,o._y+1,"RightUp",e)&&(o._leftDown=!0),this._updateNearPond(o._x,o._y+1,"MiddleUp",e)&&(o._middleDown=!0),this._updateNearPond(o._x+1,o._y+1,"LeftUp",e)&&(o._rightDown=!0),e&&o._updateItem())},e.prototype._updateNearPond=function(t,e,o,i){var n=this._getItem(l.LayerType.Back,t,e);if(null==n)return!1;if(n.ItemID==l.PondId){var r=n.node.getComponent(h.default);return r&&(r[o]=i),!0}return!1},e.prototype._getItem=function(t,e,o){var i=this._mapItemData.get(e,o);return i?i.get(t):null},e.prototype._removeItem=function(t,e,o){var i=this._getItem(t,e,o);return null!=i&&(i.ItemID==l.PondId&&this._updatePond(i.node,!1),i.node.destroy(),this._mapItemData.get(e,o).remove(t),!0)},e.prototype._removeOldItem=function(t,e,o){var i=this._getItem(t.layerType,e.x,e.y);if(null!=i){if(t.itemID==i.ItemID)return!0;this._removeItem(i.LayerType,e.x,e.y)&&(o.val1=i.ItemID)}if(null==i)if(t.layerType==l.LayerType.Back){var n=this._getItem(l.LayerType.Froe,e.x,e.y);if(null!=n)if(1==(s=_.MapItemMsg.getInstance().getItemByItemId(n.ItemID)).removeBack){var r=s.itemID;this._removeItem(l.LayerType.Froe,e.x,e.y)&&(o.val1=r)}}else{var s;if(1==t.removeBack)if(s=this._getItem(l.LayerType.Back,e.x,e.y)){r=s.ItemID;this._removeItem(l.LayerType.Back,e.x,e.y)&&(o.val1=r)}}return!1},e.prototype._alterMapItem=function(t,e){var o=!1;return this._mapItemData.eachMap(function(i){var n=i.mapItem[t];n&&n._isCustom&&n.ItemID==e.itemID&&(-1==e.index?(o=!0,n.node.removeFromParent(),n.destroy(),i.mapItem[t]=null):n.ItemPos=cc.v2(e.x,e.y))}),o},e.prototype._alterMapLayer=function(t){(this._alterMapItem(l.LayerType.Back,t)||this._alterMapItem(l.LayerType.Froe,t))&&-1==t.index&&this._saveMapToFile()},e.prototype._doRecordOperate=function(t){if("UnDo"==t){if(null==(n=f.MapRecordMsg.getInstance().getUnDo()))return;switch(n.type){case f.RecordType.AddItem:if(null==(i=_.MapItemMsg.getInstance().getItemByItemId(n.id)))return;if(this._removeItem(i.layerType,n.x,n.y),-1!=n.val1){var e=_.MapItemMsg.getInstance().getItemByItemId(n.val1);this._addMapItem(e,n.x,n.y)}if(-1!=n.val2){var o=_.MapItemMsg.getInstance().getItemByItemId(n.val2);this._addMapItem(o,n.x,n.y)}break;case f.RecordType.DelItem:var i=_.MapItemMsg.getInstance().getItemByItemId(n.id);this._addMapItem(i,n.x,n.y);break;case f.RecordType.MoveItem:this._moveMapItem(n.id,n.val1,n.val2,n.x,n.y);break;case f.RecordType.SetGround:this._setMapGround(n.val1,n.x,n.y)}}else{var n;if(null==(n=f.MapRecordMsg.getInstance().getReDo()))return;switch(n.type){case f.RecordType.AddItem:if(null==(i=_.MapItemMsg.getInstance().getItemByItemId(n.id)))return;if(this._addMapItem(i,n.x,n.y),-1!=n.val1)null==(e=_.MapItemMsg.getInstance().getItemByItemId(n.val1))&&this._removeItem(e.layerType,n.x,n.y);if(-1!=n.val2)null==(o=_.MapItemMsg.getInstance().getItemByItemId(n.val2))&&this._removeItem(o.layerType,n.x,n.y);break;case f.RecordType.DelItem:(i=_.MapItemMsg.getInstance().getItemByItemId(n.id))&&this._removeItem(i.layerType,n.x,n.y);break;case f.RecordType.MoveItem:this._moveMapItem(n.id,n.x,n.y,n.val1,n.val2);break;case f.RecordType.SetGround:this._setMapGround(n.id,n.x,n.y)}}},e.prototype._readMapForFile=function(){var t=new E.MapBuffer(this._fileName,this._widthCount,this._highCount,this._defGround);if(t.readFromFile()){for(var e=void 0,o=void 0,i=0,n=t.data;i<n.length;i++){var r=n[i];e=r.x,o=r.y;for(var s=0,a=r.itemID;s<a.length;s++){var c=a[s];if(0!=c){var p=_.MapItemMsg.getInstance().getItemByItemId(c);p&&(this._getItem(p.layerType,e,o),this._addMapItem(p,e,o))}}-1!=r.ground&&this._setMapGround(r.ground,e,o)}this._defGround=t.defGround}this._pushEvent(v.default.EVENT_SET_DEFGROUND,this._defGround)},e.prototype._saveMapToFile=function(){var t=new E.MapBuffer(this._fileName,this._widthCount,this._highCount,this._defGround);this._mapItemData.eachMap(function(e){if(e.ground!=l.BiomeType.DEF||null!=e.mapItem[0]||null!=e.mapItem[1]){for(var o=t.getData(e.x,e.y),i=0,n=e.mapItem;i<n.length;i++){var r=n[i];null!=r&&(o.itemID[r.LayerType]=r.ItemID)}o.ground=e.ground}}),t.saveToFile(),this._pushEvent(v.default.EVENT_SHOW_PROMPT,{info:"\u5730\u56fe\u4fe1\u606f\u5df2\u4fdd\u5b58",type:1})},n([a(cc.Prefab)],e.prototype,"MapItem",void 0),n([a(cc.Prefab)],e.prototype,"PondItem",void 0),n([a(d.default)],e.prototype,"MapView",void 0),n([a(y.default)],e.prototype,"MapGround",void 0),n([a(m.default)],e.prototype,"LocalItem",void 0),e=n([s],e)}(p.default);o.default=M,cc._RF.pop()},{"../Config":"Config","../Eventdef":"EventDef","../Framework/BaseComp":"BaseComp","../GameMsg/MapFile":"MapFile","../GameMsg/MapItemMsg":"MapItemMsg","../GameMsg/MapRecordMsg":"MapRecordMsg","../GameMsg/SceneMsg":"SceneMsg","./LocalItem":"LocalItem","./MapGround":"MapGround","./MapItem":"MapItem","./MapView":"MapView","./PondItem":"PondItem"}],MapFile:[function(t,e,o){"use strict";cc._RF.push(e,"07417Cz5i5ItbRt334/FKCa","MapFile");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(o,"__esModule",{value:!0});var n,r=function(t){return jsb.fileUtils.getWritablePath()+"Map/"+t+".bmap"};(function(t){t[t.BG=16]="BG",t[t.ITEM1=32]="ITEM1",t[t.ITEM2=64]="ITEM2"})(n||(n={}));var s=function(){function t(){this.x=-1,this.y=-1,this.ground=-1,this.itemID=[0,0]}return Object.defineProperty(t.prototype,"flag",{get:function(){var t=0;return 0!=this.itemID[0]&&(t|=n.ITEM1),0!=this.itemID[1]&&(t|=n.ITEM2),-1!=this.ground&&(t|=n.BG,t+=this.ground),t},enumerable:!0,configurable:!0}),t.getSize=function(){return 7},t}(),a=function(){function t(t,e,o,i){this.major_ver=1,this.minor_ver=4,this.name="",this.width=0,this.height=0,this.defGround=0,this.data=[],this.name=t,this.width=e,this.height=o,this.defGround=i,this.data=[]}return t.prototype.clear=function(){this.data.length=0},t.prototype.getData=function(t,e){var o=new s;return o.x=t,o.y=e,this.data.push(o),o},t.prototype.saveToFile=function(){var t=4;t+=this.name.length+1,t+=3,t+=this.data.length*s.getSize();var e=new Uint8Array(t);e[0]=this.major_ver,e[1]=this.minor_ver;var o,i,n,a=4;e[a]=this.name.length,++a;for(var c=0,p=this.name.length;c<p;++c)e[a]=this.name.charCodeAt(c),++a;e[a]=this.width,e[++a]=this.height,e[++a]=this.defGround,++a;for(var u=0,h=this.data;u<h.length;u++){var l=h[u];o=l.flag,e[a]=o,e[++a]=l.x,e[++a]=l.y,++a,0!=l.itemID[0]&&(i=l.itemID[0]>>8,n=255&l.itemID[0],e[a]=i,e[++a]=n,++a),0!=l.itemID[1]&&(i=l.itemID[1]>>8,n=255&l.itemID[1],e[a]=i,e[++a]=n,++a)}if(e=e.subarray(0,a),cc.sys.isNative){var _=r(this.name);jsb.fileUtils.writeDataToFile(e,_)}else{var f="";for(c=0;c<e.length;c++)f+=String.fromCharCode(e[c]);cc.sys.localStorage.setItem(this.name,f)}},t.prototype.readFromFile=function(){var t;if(cc.sys.isNative){var e=r(this.name);if(!jsb.fileUtils.isFileExist(e))return!1;if(null==(t=jsb.fileUtils.getDataFromFile(e)))return!1}else{var o=cc.sys.localStorage.getItem(this.name);if(null==o||""==o)return!1;t=new Uint8Array(o.length);for(var i=0,s=o.length;i<s;++i)t[i]=o.charCodeAt(i)}var a,c,p,u,h,l=4+(this.name.length+1)+2;this.defGround=t[l];for(var _=++l;_<t.length&&(a=t[_],c=t[++_],p=t[++_],++_,null!=c&&null!=p);){var f=this.getData(c,p);a&n.BG&&(f.ground=15&a),a&n.ITEM1&&(u=t[_],h=t[++_],++_,f.itemID[0]=(u<<8)+h),a&n.ITEM2&&(u=t[_],h=t[++_],++_,f.itemID[1]=(u<<8)+h)}return!0},t}();o.MapBuffer=a;var c=function(t){function e(e,o,i){var n=t.call(this)||this;return n.name="",n.width=10,n.height=10,n.name=e,n.width=o,n.height=i,n}return i(e,t),e}(Object);o.MapInfo=c;var p=function(){function t(){this._fileListPath="",this._fileList=[],this.readFileList()}return t.prototype.getFileList=function(){return this._fileList},t.prototype.addFile=function(t){this._fileList.push(t),this.saveFileList()},t.prototype.delFile=function(t){if(!(t<0||this._fileList.length<=t)){if(cc.sys.isNative){var e=r(this._fileList[t].name);jsb.fileUtils.isFileExist(e)&&jsb.fileUtils.removeFile(e)}else cc.sys.localStorage.removeItem(this._fileList[t].name);this._fileList.splice(t,1),this.saveFileList()}},t.prototype.readFileList=function(){var t;if(cc.sys.isNative?(this._fileListPath=jsb.fileUtils.getWritablePath()+"FileList",jsb.fileUtils.isFileExist(this._fileListPath)&&(t=jsb.fileUtils.getStringFromFile(this._fileListPath))):t=cc.sys.localStorage.getItem("FileList"),t)for(var e=t.split("\r\n"),o=0;o<e.length;o++){var i=e[o].split("|"),n=new c(i[0],Number(i[1]),Number(i[2]));this._fileList.push(n)}},t.prototype.saveFileList=function(){for(var t="",e=0;e<this._fileList.length;e++){var o=this._fileList[e];t+=o.name+"|"+o.width+"|"+o.height,e+1!=this._fileList.length&&(t+="\r\n")}cc.sys.isNative?jsb.fileUtils.writeStringToFile(t,this._fileListPath):cc.sys.localStorage.setItem("FileList",t)},t}();o.MapFile=p,cc._RF.pop()},{}],MapGround:[function(t,e,o){"use strict";cc._RF.push(e,"cae17/foMdNoYSE6+1m3FsR","MapGround");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=t("../GameMsg/SpritesMsg"),p=function(){function t(){}return Object.defineProperty(t,"seed",{set:function(e){t.r=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"random",{get:function(){return t.r=(1103515245*t.r+12345)%32767/32767,t.r},enumerable:!0,configurable:!0}),t.r=1,t}(),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ItemPrefab=null,e._itemList=[],e}return i(e,t),e.prototype._initGround=function(t){this.node.destroyAllChildren(),p.seed=1,this._itemList=[];for(var e=0;e<t.height;e++)for(var o=0;o<t.width;o++){var i=cc.instantiate(this.ItemPrefab);if(i){this._itemList[100*e+o]=i,this.node.addChild(i);var n=Math.floor(32*p.random);i.name=String(n)}}},e.prototype._onSetGround=function(t,e,o){var i=this._itemList[100*o+e];if(i){var n=i.getChildByName("Sprite").getComponent(cc.Sprite),r=c.default.getInstance().getBiomeSpriteFrame(t,Number(i.name));null!=r&&(n.spriteFrame=r)}},n([a(cc.Prefab)],e.prototype,"ItemPrefab",void 0),e=n([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../GameMsg/SpritesMsg":"SpritesMsg"}],MapItemMsg:[function(t,e,o){"use strict";cc._RF.push(e,"e7c56blFjlK1JI1VCDiQUl2","MapItemMsg");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=t("../Config"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(Object);o.ItemInfo=p;var u=function(){return function(){}}();o.ItemIndex=u;var h=function(t){function e(){var e=t.call(this)||this;return e.ItemData=null,e.WritablePath="",e._customData=[],e._itemIndex=[],e}var o;return i(e,t),o=e,e.getInstance=function(){return null==this._instance&&(this._instance=new o),this._instance},e.prototype.__preload=function(){if(null==o._instance&&(o._instance=this),cc.sys.isNative){0;var t=jsb.fileUtils.getWritablePath(),e=t+"Custom/";jsb.fileUtils.isDirectoryExist(e)||jsb.fileUtils.createDirectory(e);var i=t+"Map/";jsb.fileUtils.isDirectoryExist(i)||jsb.fileUtils.createDirectory(i)}},e.prototype.onLoad=function(){this._initItemInfo(),this.readCustomData()},e.prototype._initItemInfo=function(){if(this._itemIndex=[],null!=this.ItemData)for(var t=0;t<this.ItemData.json.length;t++)-1!=this.ItemData.json[t].itemType&&(null==this._itemIndex[this.ItemData.json[t].itemType]&&(this._itemIndex[this.ItemData.json[t].itemType]=[]),this._itemIndex[this.ItemData.json[t].itemType].push({index:t,Custom:!1}))},e.prototype.getItemByItemId=function(t){for(var e=0,o=this.ItemData.json;e<o.length;e++){var i=o[e];if(i.itemID==t)return i}return this.getCustomItemById(t)},e.prototype.getItemByIndex=function(t){return 0<=t&&t<this.ItemData.json.length?this.ItemData.json[t]:null},e.prototype.getItemTypeCount=function(t){return t==c.ItemType.Biome?7:null==this._itemIndex[t]?0:this._itemIndex[t].length},e.prototype.getItemWithTypeByIndx=function(t,e){if(null==this._itemIndex[t]||null==this._itemIndex[t][e])return null;var o=this._itemIndex[t][e];return o.Custom?this.getCustomItemByIndex(o.index):this.getItemByIndex(o.index)},e.prototype.alterCutomItem=function(t){for(var e=0;e<this._customData.length;e++)if(this._customData[e].itemID==t.itemID){-1==t.index?this._customData.splice(e,1):this._customData[e]=t;break}this._initItemInfo();for(e=0;e<this._customData.length;e++){var o=this._customData[e];this._itemIndex[o.itemType].push({index:e,Custom:!0})}this.saveCustomData()},e.prototype.addCustomItem=function(t){this._itemIndex[t.itemType].push({index:this._customData.length,Custom:!0}),this._customData.push(t)},e.prototype.getCustomItemByIndex=function(t){return 0<=t&&t<this._customData.length?this._customData[t]:null},e.prototype.getCustomItemById=function(t){for(var e=0,o=this._customData;e<o.length;e++){var i=o[e];if(i.itemID==t)return i}return null},e.prototype.getItemByIndexID=function(t){for(var e=0,o=this.ItemData.json;e<o.length;e++){if((r=o[e]).index==t)return r}for(var i=0,n=this._customData;i<n.length;i++){var r;if((r=n[i]).index==t)return r}return null},e.prototype.readCustomData=function(){if(cc.sys.isNative){var t=jsb.fileUtils.getWritablePath()+"Custom/Custom.json";if(jsb.fileUtils.isFileExist(t))for(var e=jsb.fileUtils.getStringFromFile(t),o=0,i=JSON.parse(e);o<i.length;o++){var n=i[o];this.addCustomItem(n)}}},e.prototype.saveCustomData=function(){var t=JSON.stringify(this._customData),e=jsb.fileUtils.getWritablePath()+"Custom/Custom.json";jsb.fileUtils.writeStringToFile(t,e)},n([a(cc.JsonAsset)],e.prototype,"ItemData",void 0),n([a({displayName:"\u6d4b\u8bd5\u76ee\u5f55"})],e.prototype,"WritablePath",void 0),e=o=n([s],e)}(cc.Component);o.MapItemMsg=h,cc._RF.pop()},{"../Config":"Config"}],MapItem:[function(t,e,o){"use strict";cc._RF.push(e,"f085bvW7whLlrbW8y8FsFbw","MapItem");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=t("../Config"),p=t("../GameMsg/SpritesMsg"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.LayerType=c.LayerType.Back,e.ItemType=-1,e.ItemID=-1,e._itemIndex=-1,e._isCustom=!1,e._x=0,e._y=0,e}return i(e,t),Object.defineProperty(e.prototype,"ItemScale",{get:function(){return this.sprite?this.sprite.node.scale:0},set:function(t){this.sprite&&this.sprite.node.setScale(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ItemPos",{get:function(){return this.sprite?this.sprite.node.position:null},set:function(t){this.sprite&&this.sprite.node.setPosition(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ItemARPos",{get:function(){return this.sprite?this.sprite.node.getAnchorPoint():null},set:function(t){this.sprite&&this.sprite.node.setAnchorPoint(t)},enumerable:!0,configurable:!0}),e.prototype.initMapItem=function(t,e,o){if(this._isCustom=1==t.Custom,this._setPosition(e,o),t&&(this.LayerType=t.layerType,this.ItemType=t.itemType,this.ItemID=t.itemID,this.ItemScale=t.scale,this.ItemPos=cc.v2(t.x,t.y),this.ItemARPos=cc.v2(.5,t.arY),this._loadSprile(this.ItemID,1==t.Custom),t.hasOwnProperty("color"))){var i=t.color;this.sprite.node.color=new cc.Color(i[0],i[1],i[2])}},e.prototype._setPosition=function(t,e){this._x=t,this._y=e,this.node.zIndex=t+100*e,this.node.setPosition(cc.v2(100*t+50,-100*e-50))},e.prototype._loadSprile=function(t,e){var o=p.default.getInstance().getMapSpriteFrame(String(t),e);if(null==o){var i=jsb.fileUtils.getWritablePath()+"Custom/"+t+".png";cc.loader.load({url:i,type:"image"},this._onComplete.bind(this))}else this.sprite.spriteFrame=o},e.prototype._onComplete=function(t,e){if(!t){var o=new cc.SpriteFrame(e);p.default.getInstance().addMapSpriteFrame(String(this.ItemID),o),this.sprite.spriteFrame=o,cc.dynamicAtlasManager.insertSpriteFrame(o)}},n([a(cc.Sprite)],e.prototype,"sprite",void 0),n([a()],e.prototype,"ItemScale",null),n([a()],e.prototype,"ItemPos",null),n([a()],e.prototype,"ItemARPos",null),e=n([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Config":"Config","../GameMsg/SpritesMsg":"SpritesMsg"}],MapRecordMsg:[function(t,e,o){"use strict";cc._RF.push(e,"c5d9cu7IlVLxoy0TjT7lxRk","MapRecordMsg");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Extend/Audio/AudioMsg"),r=t("../Extend/Audio/AudioIndex");(function(t){t[t.AddItem=0]="AddItem",t[t.DelItem=1]="DelItem",t[t.MoveItem=2]="MoveItem",t[t.SetGround=3]="SetGround"})(o.RecordType||(o.RecordType={}));var s=function(t){function e(e,o,i,n,r,s){void 0===r&&(r=-1),void 0===s&&(s=-1);var a=t.call(this)||this;return a.type=e,a.id=o,a.x=i,a.y=n,a.val1=r,a.val2=s,a}return i(e,t),e}(Object);o.RecordInfo=s;var a=function(){function t(){this.recordList=[],this.recoveryList=[]}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.getUnDo=function(){if(0==this.recordList.length)return null;var t=this.recordList.pop();return this.recoveryList.push(t),t},t.prototype.getReDo=function(){if(0==this.recoveryList.length)return null;var t=this.recoveryList.pop();return this.recordList.push(t),t},t.prototype.pushRecord=function(t){this.recordList.push(t),this.recoveryList.length&&(this.recoveryList=[]),n.default.getInstance().playAudio(r.default.ADD_ITEM,.5)},t.prototype.clearRecord=function(){this.recordList=[],this.recoveryList=[]},t}();o.MapRecordMsg=a,cc._RF.pop()},{"../Extend/Audio/AudioIndex":"AudioIndex","../Extend/Audio/AudioMsg":"AudioMsg"}],MapView:[function(t,e,o){"use strict";cc._RF.push(e,"6a001Sv9O9IDZ1IOesJJ0G7","MapView");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=t("../Config"),p=t("../Framework/BaseComp"),u=t("./MapCapture"),h=t("./MapCamera"),l=t("../Eventdef"),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MapCamera=null,e.MapCapture=null,e.MapNode=null,e.FrameNode=null,e.backLayer=null,e.foreLayer=null,e.LocalItem=null,e.WidthCount=10,e.HighCount=10,e}return i(e,t),e.prototype.onLoad=function(){this._register(l.default.EVENT_SCALE_MAP,this._scaleMap),this._register(l.default.EVENT_HIDE_FRAME,this._hideFrame),this._register(l.default.EVENT_MOVE_MAP,this._setMapPoint)},e.prototype.onDestroy=function(){this._destroy(l.default.EVENT_SCALE_MAP,this._scaleMap),this._destroy(l.default.EVENT_HIDE_FRAME,this._hideFrame),this._destroy(l.default.EVENT_MOVE_MAP,this._setMapPoint)},e.prototype._initMap=function(t){this.backLayer.destroyAllChildren(),this.foreLayer.destroyAllChildren(),this.WidthCount=t.width,this.HighCount=t.height,this.MapNode.setContentSize(100*this.WidthCount,100*this.HighCount),this.MapCapture._mapname=t.name,this.MapCamera.initCamera()},e.prototype.onTouchEvent=function(t){switch(t.type){case h.OperateType.Touch:this._pushSeclectMapPos(t.pos,l.default.EVENT_SELECT_MAPPOS);break;case h.OperateType.Move:case h.OperateType.Scale:break;case h.OperateType.Hold:this._pushSeclectMapPos(t.pos,l.default.EVENT_CLICK_OPERATE);break;case h.OperateType.HoldMove:this.LocalItem.active?(this.LocalItem.setPosition(this.foreLayer.convertToNodeSpaceAR(t.pos)),this._pushSeclectMapPos(t.pos,l.default.EVENT_MOME_ITEM_ON)):this._pushSeclectMapPos(t.pos,l.default.EVENT_SELECT_MAPPOS);break;case h.OperateType.HoldEnd:this.LocalItem.active&&(this.LocalItem.active=!1,this._pushSeclectMapPos(t.pos,l.default.EVENT_MOME_ITEM_END)),this._pushEvent(l.default.EVENT_MOME_ITEM_END,null)}},e.prototype.onMiniTouchEvent=function(t){this.MapCamera&&this.MapCamera.Camera.node.setPosition(t)},e.prototype._addMapItem=function(t,e){switch(t){case c.LayerType.Back:this.backLayer.addChild(e);break;case c.LayerType.Froe:this.foreLayer.addChild(e)}},e.prototype._playAddAction=function(t){(new cc.Tween).target(t).set({opacity:0,scale:2,angle:0}).to(.5,{opacity:255,scale:1},{easing:"quintInOut"}).start()},e.prototype._pushSeclectMapPos=function(t,e){var o=this.foreLayer.convertToNodeSpaceAR(t),i=Math.floor(o.x/100),n=Math.floor(-o.y/100);i<0||n<0||i>=this.WidthCount||n>=this.HighCount||(o.x=i,o.y=n,this._pushEvent(e,o))},e.prototype._scaleMap=function(t){this.MapCamera.setScale(t)},e.prototype._setMapPoint=function(t){this.MapCamera.setPosition(t)},e.prototype._hideFrame=function(t){null!=this.FrameNode&&(this.FrameNode.active=t)},n([a(h.MapCamera)],e.prototype,"MapCamera",void 0),n([a(u.default)],e.prototype,"MapCapture",void 0),n([a(cc.Node)],e.prototype,"MapNode",void 0),n([a(cc.Node)],e.prototype,"FrameNode",void 0),n([a(cc.Node)],e.prototype,"backLayer",void 0),n([a(cc.Node)],e.prototype,"foreLayer",void 0),n([a(cc.Node)],e.prototype,"LocalItem",void 0),n([a({type:cc.Integer,min:10,max:100})],e.prototype,"WidthCount",void 0),n([a({type:cc.Integer,min:10,max:100})],e.prototype,"HighCount",void 0),e=n([s],e)}(p.default);o.default=_,cc._RF.pop()},{"../Config":"Config","../Eventdef":"EventDef","../Framework/BaseComp":"BaseComp","./MapCamera":"MapCamera","./MapCapture":"MapCapture"}],MenuView:[function(t,e,o){"use strict";cc._RF.push(e,"1c542gSoOhImqS2kurGgoyH","MenuView");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=t("../Framework/BaseComp"),p=t("../GameMsg/SpritesMsg"),u=t("../Eventdef"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.RmoveBtn=null,e.CurSprite=null,e.HoldNode=[],e.HideNode=[],e.ShowNode=[],e.OpenBton=null,e._holdClick=!1,e._holdTime=0,e._holdTimeEc=0,e._holdName="",e._show=!1,e}return i(e,t),e.prototype.onLoad=function(){this._register(u.default.EVENT_SELECT_ITEM,this._SelectItem),this._register(u.default.EVENT_SET_DEFGROUND,this._SelectItem);for(var t=0,e=this.HoldNode;t<e.length;t++){var o=e[t];o.on(cc.Node.EventType.TOUCH_START,this._onTouch,this),o.on(cc.Node.EventType.TOUCH_END,this._onTouch,this),o.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouch,this)}},e.prototype.onDestroy=function(){this._destroy(u.default.EVENT_SELECT_ITEM,this._SelectItem),this._destroy(u.default.EVENT_SET_DEFGROUND,this._SelectItem);for(var t=0,e=this.HoldNode;t<e.length;t++){var o=e[t];o.off(cc.Node.EventType.TOUCH_START,this._onTouch,this),o.off(cc.Node.EventType.TOUCH_END,this._onTouch,this),o.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouch,this)}},e.prototype.update=function(t){this._holdClick&&(this._holdTime+=t,this._holdTime>.6&&(this._holdTimeEc+=t,this._holdTimeEc>.1&&(this._holdTimeEc=0,this._pushEvent(u.default.EVENT_RECORD_OPERATE,this._holdName))))},e.prototype._onUpdateCurBG=function(t){this.CurSprite.spriteFrame=p.default.getInstance().getBiomeSpriteFrame(t,1)},e.prototype._SelectItem=function(t){null!=this.RmoveBtn&&(this.RmoveBtn.interactable=-1!=t)},e.prototype._onTouch=function(t){t.type==cc.Node.EventType.TOUCH_START?(this._holdClick=!0,this._holdTime=0,this._holdTimeEc=0,this._holdName=t.target.getName()):(this._holdClick=!1,this._holdTime=0,this._holdTimeEc=0)},e.prototype.onRemoveBtn=function(){this._pushEvent(u.default.EVENT_SELECT_ITEM,-1)},e.prototype.onScaleBtn=function(t,e){this._pushEvent(u.default.EVENT_SCALE_MAP,Number(e))},e.prototype.onEyeBtn=function(t,e){this._pushEvent(u.default.EVENT_HIDE_FRAME,!t.isChecked)},e.prototype.onNewBtn=function(){this._pushEvent(u.default.EVENT_SHOW_PROMPT,{info:"\u662f\u5426\u786e\u8ba4\u65b0\u5efa?",event:u.default.EVENT_NEWMAP_CONFIRM})},e.prototype.onSaveBtn=function(){this._pushEvent(u.default.EVENT_SAVE_FILE,-1)},e.prototype.onImagBtn=function(){this._pushEvent(u.default.EVENT_SHOW_SIZEVIEW,"OutSize")},e.prototype.onGroundBtn=function(){this._pushEvent(u.default.EVENT_SHOW_SIZEVIEW,"Ground")},e.prototype.onRecordBtn=function(t,e){this._pushEvent(u.default.EVENT_RECORD_OPERATE,e)},e.prototype.onMiniMap=function(){this._pushEvent(u.default.EVENT_SET_MINIMAP)},e.prototype.onShowBtn=function(t){var e=this._show?1:-1;t.target.setScale(1,e),this._show=!this._show,this.unscheduleAllCallbacks(),this.schedule(this._changeBtn.bind(this),.05,10,0)},e.prototype._changeBtn=function(){this._show?this._changNode(this.ShowNode,!this._show)&&this._changNode(this.HideNode,this._show):this._changNode(this.HideNode,this._show)&&this._changNode(this.ShowNode,!this._show)},e.prototype._changNode=function(t,e){for(var o=0,i=t;o<i.length;o++){var n=i[o];if(n.active!=e)return n.active=e,!1}return!0},n([a(cc.Button)],e.prototype,"RmoveBtn",void 0),n([a(cc.Sprite)],e.prototype,"CurSprite",void 0),n([a(cc.Node)],e.prototype,"HoldNode",void 0),n([a(cc.Node)],e.prototype,"HideNode",void 0),n([a(cc.Node)],e.prototype,"ShowNode",void 0),n([a(cc.Node)],e.prototype,"OpenBton",void 0),e=n([s],e)}(c.default);o.default=h,cc._RF.pop()},{"../Eventdef":"EventDef","../Framework/BaseComp":"BaseComp","../GameMsg/SpritesMsg":"SpritesMsg"}],MiniMap:[function(t,e,o){"use strict";cc._RF.push(e,"aa78bVck55BZK1IDp1V3ht2","MiniMap");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=t("../GameMsg/SceneMsg"),p=t("../EventDef"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.camera=null,e.TouchEvent=[],e._curScale=null,e}return i(e,t),e.prototype.onLoad=function(){this._register(p.default.EVENT_SET_MINIMAP,this._onHide),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouch,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouch,this),this.node.on(cc.Node.EventType.POSITION_CHANGED,this._onChanged,this)},e.prototype.onDestroy=function(){this._destroy(p.default.EVENT_SET_MINIMAP,this._onHide),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouch,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouch,this),this.node.off(cc.Node.EventType.POSITION_CHANGED,this._onChanged,this)},e.prototype.start=function(){null!=this.camera&&(this._curScale=this.node.width/c.default.mapSize.width/100,this.camera.zoomRatio=this._curScale)},e.prototype._onTouch=function(t){if(this.TouchEvent.length){var e=this.node.convertToNodeSpaceAR(t.getLocation());e.mulSelf(1/this._curScale),cc.Component.EventHandler.emitEvents(this.TouchEvent,e)}},e.prototype._onChanged=function(){if(null!=this.camera){var t=cc.Canvas.instance.node.getContentSize(),e=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),o=e.x/t.width-.5,i=e.y/t.height-.5;this.camera.rect=new cc.Rect(o,i,1,1)}},e.prototype._onHide=function(){var t=this.node.active;this.node.active=!t,this.camera.enabled=!t},n([a(cc.Camera)],e.prototype,"camera",void 0),n([a({type:cc.Component.EventHandler})],e.prototype,"TouchEvent",void 0),e=n([s],e)}(t("../Framework/BaseComp").default);o.default=u,cc._RF.pop()},{"../EventDef":"EventDef","../Framework/BaseComp":"BaseComp","../GameMsg/SceneMsg":"SceneMsg"}],PersistNode:[function(t,e,o){"use strict";cc._RF.push(e,"4deb1qe7HNE26os5Vkj2Osz","PersistNode");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.menu,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node)},e=n([s,a("Extend/PersistNode")],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],PondItem:[function(t,e,o){"use strict";cc._RF.push(e,"fbd268FludBk6E3Ft7uV8xC","PondItem");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._leftUp=!1,e._middleUp=!1,e._rightUp=!1,e._leftMiddle=!1,e._rightMiddle=!1,e._leftDown=!1,e._middleDown=!1,e._rightDown=!1,e.L_U=[],e.M_U=[],e.R_U=[],e.L_M=[],e.R_M=[],e.L_D=[],e.M_D=[],e.R_D=[],e}return i(e,t),Object.defineProperty(e.prototype,"LeftUp",{get:function(){return this._leftUp},set:function(t){this._leftUp=t,this._updateItem()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MiddleUp",{get:function(){return this._middleUp},set:function(t){this._middleUp=t,this._updateItem()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RightUp",{get:function(){return this._rightUp},set:function(t){this._rightUp=t,this._updateItem()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LeftMiddle",{get:function(){return this._leftMiddle},set:function(t){this._leftMiddle=t,this._updateItem()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RightMiddle",{get:function(){return this._rightMiddle},set:function(t){this._rightMiddle=t,this._updateItem()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LeftDown",{get:function(){return this._leftDown},set:function(t){this._leftDown=t,this._updateItem()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MiddleDown",{get:function(){return this._middleDown},set:function(t){this._middleDown=t,this._updateItem()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RightDown",{get:function(){return this._rightDown},set:function(t){this._rightDown=t,this._updateItem()},enumerable:!0,configurable:!0}),e.prototype.initMapItem=function(t,e,o){this._isCustom=1==t.Custom,this._setPosition(e,o),t&&(this.LayerType=t.layerType,this.ItemType=t.itemType,this.ItemID=t.itemID)},e.prototype._updateItem=function(){this._setShow(this.M_U[this._middleUp?1:0]),this._setShow(this.L_M[this._leftMiddle?1:0]),this._setShow(this.R_M[this._rightMiddle?1:0]),this._setShow(this.M_D[this._middleDown?1:0]);var t=0,e=0,o=0,i=0;this._middleUp&&(t=e=3),this._middleDown&&(o=i=3),this._leftMiddle&&(t=3==t?4:2,o=3==o?4:2),this._leftUp&&4==t&&(t=1),this._leftDown&&4==o&&(o=1),this._rightMiddle&&(e=3==e?4:2,i=3==i?4:2),this._rightUp&&4==e&&(e=1),this._rightDown&&4==i&&(i=1),this._setShow(this.L_U[t]),this._setShow(this.R_U[e]),this._setShow(this.L_D[o]),this._setShow(this.R_D[i])},e.prototype._setShow=function(t){for(var e=0,o=t.parent.children;e<o.length;e++){var i=o[e];i.active=i==t}},n([a({displayName:"\u5de6\u4e0a"})],e.prototype,"LeftUp",null),n([a({displayName:"\u4e2d\u4e0a"})],e.prototype,"MiddleUp",null),n([a({displayName:"\u53f3\u4e0a"})],e.prototype,"RightUp",null),n([a({displayName:"\u5de6\u4e2d"})],e.prototype,"LeftMiddle",null),n([a({displayName:"\u53f3\u4e2d"})],e.prototype,"RightMiddle",null),n([a({displayName:"\u5de6\u4e0b"})],e.prototype,"LeftDown",null),n([a({displayName:"\u4e2d\u4e0b"})],e.prototype,"MiddleDown",null),n([a({displayName:"\u53f3\u4e0b"})],e.prototype,"RightDown",null),n([a(cc.Node)],e.prototype,"L_U",void 0),n([a(cc.Node)],e.prototype,"M_U",void 0),n([a(cc.Node)],e.prototype,"R_U",void 0),n([a(cc.Node)],e.prototype,"L_M",void 0),n([a(cc.Node)],e.prototype,"R_M",void 0),n([a(cc.Node)],e.prototype,"L_D",void 0),n([a(cc.Node)],e.prototype,"M_D",void 0),n([a(cc.Node)],e.prototype,"R_D",void 0),e=n([s],e)}(t("./MapItem").default);o.default=c,cc._RF.pop()},{"./MapItem":"MapItem"}],PromptView:[function(t,e,o){"use strict";cc._RF.push(e,"c0286Zc0MRHVp9kPBXt6IfM","PromptView");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=t("../Framework/BaseView"),p=t("../Eventdef"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PromptInfo=null,e.ConfirmBtn1=null,e.ConfirmBtn2=null,e.CancelBtn=null,e._enent=-1,e}return i(e,t),e.prototype.onLoad=function(){this._register(p.default.EVENT_SHOW_PROMPT,this._onShowView),this._register(p.default.EVENT_HIDE_PROMPT,this.onHide)},e.prototype.onDestroy=function(){this._destroy(p.default.EVENT_SHOW_PROMPT,this._onShowView),this._destroy(p.default.EVENT_HIDE_PROMPT,this.onHide)},e.prototype._onShowView=function(t){if(this.PromptInfo.string=t.info,this._enent=t.event,null!=this.ConfirmBtn1&&null!=this.ConfirmBtn2&&null!=this.CancelBtn){var e=t.type||0;0==e?(this.ConfirmBtn1.active=!0,this.CancelBtn.active=!0,this.ConfirmBtn2.active=!1):1==e?(this.ConfirmBtn1.active=!1,this.CancelBtn.active=!1,this.ConfirmBtn2.active=!0):2==e&&(this.ConfirmBtn1.active=!1,this.CancelBtn.active=!1,this.ConfirmBtn2.active=!1)}this.onShow()},e.prototype.onConfirmBtn=function(){null!=this._enent&&this._pushEvent(this._enent,"Confirm"),this.onHide()},e.prototype.onCancelBtn=function(){null!=this._enent&&this._pushEvent(this._enent,"Cancel"),this.onHide()},n([a(cc.Label)],e.prototype,"PromptInfo",void 0),n([a(cc.Node)],e.prototype,"ConfirmBtn1",void 0),n([a(cc.Node)],e.prototype,"ConfirmBtn2",void 0),n([a(cc.Node)],e.prototype,"CancelBtn",void 0),e=n([s],e)}(c.default);o.default=u,cc._RF.pop()},{"../Eventdef":"EventDef","../Framework/BaseView":"BaseView"}],RootView:[function(t,e,o){"use strict";cc._RF.push(e,"9d5c01zxo5M4YBsF2XtQDhj","RootView");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=r.menu,p=function(){function t(){this.ViewName="",this.active=!0,this.ZOrder=0,this.prefab=null}return n([a({tooltip:"\u754c\u9762\u540d\u79f0"})],t.prototype,"ViewName",void 0),n([a({tooltip:"\u9ed8\u8ba4\u663e\u793a"})],t.prototype,"active",void 0),n([a({tooltip:"\u754c\u9762\u5c42\u7ea7"})],t.prototype,"ZOrder",void 0),n([a({type:cc.Prefab,tooltip:"\u9884\u5236\u754c\u9762"})],t.prototype,"prefab",void 0),t=n([s("ViewInfo")],t)}();o.ViewInfo=p;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UiViews=[],e}return i(e,t),e.prototype.start=function(){this._addNodes()},e.prototype._addNodes=function(){for(var t=0,e=this.UiViews;t<e.length;t++){var o=e[t];if(o.prefab){var i=cc.instantiate(o.prefab);this.node.addChild(i),i.zIndex=o.ZOrder,i.active=o.active}}},n([a(p)],e.prototype,"UiViews",void 0),e=n([s,c("Extend/RootView")],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],SceneMsg:[function(t,e,o){"use strict";cc._RF.push(e,"14faeiaLjdLgqfO5F/LeaAM","SceneMsg"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../EventDef"),n=t("../Framework/EventMsg"),r=function(){function t(){this._mapname="",this._mapSize=cc.Size.ZERO,n.default.on(i.default.EVENT_NEWMAP_CONFIRM,this.backStartScene)}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mapName",{get:function(){return this._mapname},set:function(t){this._mapname=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mapSize",{get:function(){return this._mapSize},set:function(t){this._mapSize=t},enumerable:!0,configurable:!0}),t.prototype.startEditor=function(){cc.director.loadScene(cc.sys.isMobile||cc.sys.platform===cc.sys.WECHAT_GAME?"MobileScene.fire":"DesktopScene.fire")},t.prototype.backStartScene=function(t){"Confirm"==t&&cc.director.loadScene("StartScene.fire")},t}();o.default=r.instance,cc._RF.pop()},{"../EventDef":"EventDef","../Framework/EventMsg":"EventMsg"}],SeceltItem:[function(t,e,o){"use strict";cc._RF.push(e,"ad2f1FD6FhCQJzkwXetvWG3","SeceltItem");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=t("../Framework/BaseComp"),p=t("../GameMsg/MapItemMsg"),u=t("../GameMsg/SpritesMsg"),h=t("../Config"),l=t("../Eventdef"),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Sprite=null,e.SeceltMask=null,e.TextName=null,e.AddNode=null,e.AlterBtn=null,e._itemIndex=-1,e._itemType=-1,e._mapItemId=-1,e}return i(e,t),e.prototype._initItem=function(t,e,o,i){this._itemIndex=t,this._itemType=e,this._mapItemId=o,this.AddNode&&(this.AddNode.active=o<0),this.AlterBtn&&(this.AlterBtn.active=i),(o>0||e==h.ItemType.Biome)&&this._loadSprile(o,i)},Object.defineProperty(e.prototype,"Name",{get:function(){return null==this.TextName?"":this.TextName.string},set:function(t){null!=this.TextName&&(this.TextName.string=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsSecelt",{get:function(){return null!=this.SeceltMask&&this.SeceltMask.active},set:function(t){null!=this.SeceltMask&&(this.SeceltMask.active=t)},enumerable:!0,configurable:!0}),e.prototype.onSeceltItem=function(){this._pushEvent(l.default.EVENT_SELECT_ITEM,this._itemIndex)},e.prototype.onAlterItem=function(){var t=p.MapItemMsg.getInstance().getItemWithTypeByIndx(this._itemType,this._itemIndex);t&&this._pushEvent(l.default.EVENT_SHOW_CUSTOM,{ItemType:t.itemType,ItemID:t.itemID,ItemName:t.name,DiffX:t.x,DiffY:t.y})},e.prototype._loadSprile=function(t,e){if(e){var o=jsb.fileUtils.getWritablePath()+"Custom/"+t+".png";cc.loader.load({url:o,type:"image"},this._onComplete.bind(this))}else this._itemType==h.ItemType.Biome?this.Sprite.spriteFrame=u.default.getInstance().getBiomeSpriteFrame(t,1):this.Sprite.spriteFrame=u.default.getInstance().getMapSpriteFrame(String(t)),this.Sprite.spriteFrame&&this._updateSize()},e.prototype._onComplete=function(t,e){if(!t){var o=new cc.SpriteFrame(e);this.Sprite.spriteFrame=o,this._updateSize()}},e.prototype._updateSize=function(){var t=this.Sprite.spriteFrame.getRect(),e=t.width,o=t.height;if(o>200){var i=200/o;e*=i,this.Sprite.node.setScale(i)}e>100&&this.node.setContentSize(e+20,250)},n([a(cc.Sprite)],e.prototype,"Sprite",void 0),n([a(cc.Node)],e.prototype,"SeceltMask",void 0),n([a(cc.Label)],e.prototype,"TextName",void 0),n([a(cc.Node)],e.prototype,"AddNode",void 0),n([a(cc.Node)],e.prototype,"AlterBtn",void 0),n([a()],e.prototype,"Name",null),n([a()],e.prototype,"IsSecelt",null),e=n([s],e)}(c.default);o.default=_,cc._RF.pop()},{"../Config":"Config","../Eventdef":"EventDef","../Framework/BaseComp":"BaseComp","../GameMsg/MapItemMsg":"MapItemMsg","../GameMsg/SpritesMsg":"SpritesMsg"}],SeceltView:[function(t,e,o){"use strict";cc._RF.push(e,"fa288UjHRFGP6QP557kXUtb","SeceltView");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=t("../Framework/BaseComp"),p=t("./SeceltItem"),u=t("../GameMsg/MapItemMsg"),h=t("../Config"),l=t("../Eventdef"),_=["\u8349\u5730","\u6cbc\u6cfd","\u9ec4\u8349\u539f","\u8352\u5730","\u51b0\u539f","\u6c99\u6f20","\u96e8\u6797"],f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ListContent=null,e.ItemPrefab=null,e.BiomePrefab=null,e._listItems=[],e._SeceltType=h.ItemType.Road,e._CutomItem=null,e}return i(e,t),e.prototype.onLoad=function(){this._register(l.default.EVENT_SELECT_ITEM,this._SelectItem),this._register(l.default.EVENT_ADD_CUSTOM,this._updateList),this._register(l.default.EVENT_ALTER_CUSTOM,this._updateItem)},e.prototype.onDestroy=function(){this._destroy(l.default.EVENT_SELECT_ITEM,this._SelectItem),this._destroy(l.default.EVENT_ADD_CUSTOM,this._updateList),this._destroy(l.default.EVENT_ALTER_CUSTOM,this._updateItem)},e.prototype.start=function(){this._updateList()},e.prototype._SelectItem=function(t){if(null!=this._listItems[this._SeceltType])if(h.CUSTOM_INDEX!=t)for(var e=0,o=this._listItems[this._SeceltType];e<o.length;e++){var i=o[e];i.IsSecelt=i._itemIndex==t}else this._pushEvent(l.default.EVENT_SHOW_CUSTOM,{ItemType:this._SeceltType})},e.prototype._updateItem=function(t){for(var e=0,o=this._listItems[this._SeceltType];e<o.length;e++){var i=o[e];if(i._mapItemId==t.itemID){-1==t.index?(i.destroy(),i.node.removeFromParent(),this._listItems[this._SeceltType].splice(i._itemIndex,1)):i.Name=t.name;break}}},e.prototype._updateList=function(){if(null!=this.ListContent&&null!=this.ItemPrefab){this.ListContent.removeAllChildren(!1);for(var t=u.MapItemMsg.getInstance().getItemTypeCount(this._SeceltType),e=0;e<t;e++){var o=this._getSeceltItem(e);null!=o&&this.ListContent.addChild(o.node)}this._addCustomItem(),this._getSeceltItem(0)&&this._pushEvent(l.default.EVENT_SELECT_ITEM,0)}},e.prototype._addCustomItem=function(){if(cc.sys.isNative&&this._SeceltType!=h.ItemType.Biome){if(null==this._CutomItem){var t=cc.instantiate(this.ItemPrefab),e=t.getComponent(p.default);if(null==e)return;this._CutomItem=t,e._initItem(h.CUSTOM_INDEX,-1,-1,!1),e.IsSecelt=!1}this.ListContent.addChild(this._CutomItem)}},e.prototype._getSeceltItem=function(t){if(null==this._listItems[this._SeceltType]&&(this._listItems[this._SeceltType]=[]),null==this._listItems[this._SeceltType][t]){var e=void 0;if(null==(e=this._SeceltType==h.ItemType.Biome?this._createBiomeItem(t):this._createCommonItem(t)))return null;e.IsSecelt=!1,this._listItems[this._SeceltType][t]=e}return this._listItems[this._SeceltType][t]},e.prototype._createCommonItem=function(t){var e=cc.instantiate(this.ItemPrefab).getComponent(p.default);if(null==e)return null;var o=u.MapItemMsg.getInstance().getItemWithTypeByIndx(this._SeceltType,t);if(null==o)return null;if(e.Name=o.name,e._initItem(t,o.itemType,o.itemID,1==o.Custom),o.hasOwnProperty("color")){var i=o.color;e.Sprite.node.color=new cc.Color(i[0],i[1],i[2])}return e},e.prototype._createBiomeItem=function(t){var e=cc.instantiate(this.BiomePrefab).getComponent(p.default);return null==e?null:(e.Name=_[t],e._initItem(t,this._SeceltType,t,!1),e)},e.prototype.onSeceltType=function(t,e){var o=Number(e);this._SeceltType!=o&&(this._SeceltType=o,this._updateList(),this._pushEvent(l.default.EVENT_SELECT_TYPE,this._SeceltType))},n([a(cc.Node)],e.prototype,"ListContent",void 0),n([a(cc.Prefab)],e.prototype,"ItemPrefab",void 0),n([a(cc.Prefab)],e.prototype,"BiomePrefab",void 0),e=n([s],e)}(c.default);o.default=f,cc._RF.pop()},{"../Config":"Config","../Eventdef":"EventDef","../Framework/BaseComp":"BaseComp","../GameMsg/MapItemMsg":"MapItemMsg","./SeceltItem":"SeceltItem"}],Shake:[function(t,e,o){"use strict";cc._RF.push(e,"61f579GXVBA34BtR88jyBcA","Shake");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator.menu,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._initial_x=0,e._initial_y=0,e._strength_x=0,e._strength_y=0,e}var o;return i(e,t),o=e,e.create=function(t,e,i){var n=new o;return n.initWithDuration(t,e,i),n},e.prototype.initWithDuration=function(t,e,o){return cc.ActionInterval.prototype.initWithDuration.apply(this,arguments),this._strength_x=e,this._strength_y=o,!0},e.prototype.fgRangeRand=function(t,e){return Math.random()*(e-t)+t},e.prototype.update=function(t){var e=this.fgRangeRand(-this._strength_x,this._strength_x),o=this.fgRangeRand(-this._strength_y,this._strength_y);this.getTarget().setPosition(e+this._initial_x,o+this._initial_y)},e.prototype.startWithTarget=function(t){cc.ActionInterval.prototype.startWithTarget.apply(this,arguments),this._initial_x=t.x,this._initial_y=t.y},e.prototype.stop=function(){this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y)),cc.ActionInterval.prototype.stop.apply(this)},e=o=n([r("Extend/Shake")],e)}(cc.ActionInterval);o.default=s,cc._RF.pop()},{}],SizeView:[function(t,e,o){"use strict";cc._RF.push(e,"5391cf++B1C2Z2gX8uvaFj8","SizeView");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=t("../Eventdef"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SizeLabel=null,e.SizeSlider=null,e.GroundList=null,e.GroundNode=null,e.Animation=null,e._showGroud=!1,e}return i(e,t),e.prototype.onLoad=function(){this._register(c.default.EVENT_SHOW_SIZEVIEW,this._onShowView)},e.prototype.onDestroy=function(){this._destroy(c.default.EVENT_SHOW_SIZEVIEW,this._onShowView)},e.prototype._onShowView=function(t){this.node.active=!0,this.SizeSlider.active="OutSize"==t,"Ground"==t&&this.Animation&&this.Animation.play("showGroundL"),this._showGroundList("Ground"==t)},e.prototype._showGroundList=function(t){null!=this.GroundNode?t!=this._showGroud&&(this._showGroud=t,t&&(this.GroundList.active=!0),this.unscheduleAllCallbacks(),this.schedule(this._showGroudBtn.bind(this),.05,7,0)):this.GroundList.active=t},e.prototype._showGroudBtn=function(){for(var t=0,e=this.GroundNode.children;t<e.length;t++){var o=e[t];if(o.active!=this._showGroud)return void(o.active=this._showGroud)}this._showGroud||(this.GroundList.active=!1,this.node.active=!1)},e.prototype.onShow=function(t,e){"1"!=e&&this._showGroud?this._showGroundList(!1):this.node.active="1"==e},e.prototype.onSetSize=function(t){null!=this.SizeLabel&&(this.SizeLabel.string=String(2e3+Math.floor(3e3*t.progress)))},e.prototype.onSeceltGroundBtn=function(t,e){this._pushEvent(c.default.EVENT_SET_DEFGROUND,Number(e))},e.prototype.onConfirmBtn=function(){this.onShow(null,"0"),this._pushEvent(c.default.EVENT_CAPTURE_SIZE,Number(this.SizeLabel.string)),this._pushEvent(c.default.EVENT_SHOW_PROMPT,{info:"\u8bf7\u786e\u4fdd\u5f00\u542f\u5e94\u7528\u5b58\u50a8\u6743\u9650\uff0c\u56fe\u7247\u751f\u6210\u65f6\u8bf7\u8010\u5fc3\u7b49\u5f85...",event:c.default.EVENT_SAVE_IMAGE})},n([a(cc.Label)],e.prototype,"SizeLabel",void 0),n([a(cc.Node)],e.prototype,"SizeSlider",void 0),n([a(cc.Node)],e.prototype,"GroundList",void 0),n([a(cc.Node)],e.prototype,"GroundNode",void 0),n([a(cc.Animation)],e.prototype,"Animation",void 0),e=n([s],e)}(t("../Framework/BaseComp").default);o.default=p,cc._RF.pop()},{"../Eventdef":"EventDef","../Framework/BaseComp":"BaseComp"}],SpritesMsg:[function(t,e,o){"use strict";cc._RF.push(e,"eb60f5W96tK1auo+FO8o/ks","SpritesMsg");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=r.requireComponent,p=t("../Extend/PersistNode"),u=function(t){function e(){var e=t.call(this)||this;return e.BiomeAtlas=null,e.MapAtlas=null,e._biomeKeyList=[],e._customSprite=[],e}var o;return i(e,t),o=e,e.getInstance=function(){return null==this._instance&&(this._instance=new o),this._instance},e.prototype.__preload=function(){null==o._instance&&(o._instance=this)},e.prototype.onLoad=function(){for(var t=0;t<7;t++)for(var e=1;e<=32;e++){var o="biome_"+t+"_";e<10?(o+="0",o+=e):o+=e,this._biomeKeyList.push(o)}},e.prototype.getBiomeSpriteFrame=function(t,e){var o=this._biomeKeyList[32*t+e];return this.BiomeAtlas.getSpriteFrame(o)},e.prototype.addMapSpriteFrame=function(t,e){this._customSprite[t]=e},e.prototype.getMapSpriteFrame=function(t,e){return e?this._customSprite[t]:this.MapAtlas.getSpriteFrame(t)},n([a({type:cc.SpriteAtlas})],e.prototype,"BiomeAtlas",void 0),n([a({type:cc.SpriteAtlas})],e.prototype,"MapAtlas",void 0),e=o=n([s,c(p.default)],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Extend/PersistNode":"PersistNode"}],StartView:[function(t,e,o){"use strict";cc._RF.push(e,"dc7b5JNuyNAc7c/4Rl9YXQq","StartView");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=t("../GameMsg/SceneMsg"),p=t("../Framework/BaseComp"),u=t("../Extend/Action/Shake"),h=t("./FileItem"),l=t("../GameMsg/MapFile"),_=t("../EventDef"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NameEidtBox=null,e.WidthSlider=null,e.HightSlider=null,e.WidthEidtBox=null,e.HightEidtBox=null,e.PanleList=[],e._showPanleIdx=0,e.ListContent=null,e.ItemPrefab=null,e.MinZise=10,e.MaxZise=100,e._fileItem=[],e._secletIndex=-1,e.widthCount=20,e.hightCount=20,e._mapFile=null,e}return i(e,t),e.prototype._initView=function(){null!=this.WidthSlider&&(this.WidthSlider.progress=.2),null!=this.HightSlider&&(this.HightSlider.progress=.2),null!=this.WidthEidtBox&&(this.WidthEidtBox.string="20"),null!=this.HightEidtBox&&(this.HightEidtBox.string="20"),this.NameEidtBox.string=""},e.prototype.onLoad=function(){this._mapFile=new l.MapFile,this._register(_.default.EVENT_DELFILE_CONFIRM,this._confirmDelFile),this._initView()},e.prototype.onDestroy=function(){this._destroy(_.default.EVENT_DELFILE_CONFIRM,this._confirmDelFile)},e.prototype.start=function(){this._updateList();var t=this.node.parent;t.opacity=0,t.runAction(cc.fadeIn(.5))},e.prototype.onSlider=function(t,e){t.progress*this.MaxZise<this.MinZise&&(t.progress=this.MinZise/this.MaxZise);var o=Math.floor(t.progress*this.MaxZise);this._updateSize(e,t.progress,o)},e.prototype.onEidtBox=function(t,e){var o=Number(t.string);if(null!=o){o<this.MinZise&&(o=this.MinZise),o>this.MaxZise&&(o=this.MaxZise),t.string=String(o);var i=o/this.MaxZise;this._updateSize(e,i,o)}},e.prototype._updateSize=function(t,e,o){"width"==t?(this.widthCount=o,this.WidthSlider.progress=e,this.WidthEidtBox.string=String(o)):"hight"==t&&(this.hightCount=o,this.HightSlider.progress=e,this.HightEidtBox.string=String(o))},e.prototype._checkIsHave=function(t){for(var e=0,o=this._mapFile.getFileList();e<o.length;e++){if(o[e].name==t)return!0}return!1},e.prototype.onStartButton=function(){if(0==this._showPanleIdx){var t=this.NameEidtBox.string;if(cc.sys.isNative&&(""==t||this._checkIsHave(t)))return void this.NameEidtBox.node.runAction(u.default.create(.2,15,15));var e=t.replace(/((ht|f)tps?):\/\/[\w\-]+(\.[\w\-]+)+([\w\-\.,@?^=%&:\/~\+#]*[\w\-\@?^=%&\/~\+#])?/g,""),o=new l.MapInfo(e,this.widthCount,this.hightCount);this._mapFile.addFile(o),c.default.mapName=o.name,c.default.mapSize=new cc.Size(this.widthCount,this.hightCount),c.default.startEditor()}else{var i=this._mapFile.getFileList();if(!(i.length>0))return void this.onChangPanle(null,"0");o=i[this._secletIndex];c.default.mapName=o.name,c.default.mapSize=new cc.Size(this.widthCount,this.hightCount),c.default.startEditor()}},e.prototype.onChangPanle=function(t,e){var o=Number(e);this._showPanleIdx=o;for(var i=0;i<this.PanleList.length;i++)null!=this.PanleList&&(this.PanleList[i].active=i==o)},e.prototype._onOpen=function(){cc.sys.openURL("https://baiding_x.gitee.io/hopeeditor")},e.prototype._seceltItem=function(t){this._secletIndex=t;for(var e=0,o=this._fileItem;e<o.length;e++){var i=o[e];i.Secelt=i._itemIndex==t}},e.prototype._updateList=function(){null!=this.ListContent&&(this.ListContent.destroyAllChildren(),this._fileItem=[]);for(var t=this._mapFile.getFileList(),e=0;e<t.length;e++){var o=t[e];if(null!=this.ItemPrefab){var i=cc.instantiate(this.ItemPrefab),n=i.getComponent(h.default);null!=n&&(n.NameLabel.string=o.name,n.WidthLabel.string=String(o.width),n.HightLabel.string=String(o.height),n._setItemIndex(e),n._seceltCallBack=this._seceltItem.bind(this),this._fileItem.push(n)),this.ListContent.addChild(i)}}this._seceltItem(0)},e.prototype.onDelFile=function(){this._pushEvent(_.default.EVENT_SHOW_PROMPT,{info:"\u662f\u5426\u786e\u8ba4\u5220\u9664?",event:_.default.EVENT_DELFILE_CONFIRM})},e.prototype._confirmDelFile=function(t){"Confirm"==t&&(this._mapFile.delFile(this._secletIndex),this._updateList())},e.prototype._onNewMap=function(t){"Confirm"==t&&(this.node.active=!0,this._initView(),this._updateList())},n([a(cc.EditBox)],e.prototype,"NameEidtBox",void 0),n([a(cc.Slider)],e.prototype,"WidthSlider",void 0),n([a(cc.Slider)],e.prototype,"HightSlider",void 0),n([a(cc.EditBox)],e.prototype,"WidthEidtBox",void 0),n([a(cc.EditBox)],e.prototype,"HightEidtBox",void 0),n([a(cc.Node)],e.prototype,"PanleList",void 0),n([a(cc.Node)],e.prototype,"ListContent",void 0),n([a(cc.Prefab)],e.prototype,"ItemPrefab",void 0),n([a],e.prototype,"MinZise",void 0),n([a],e.prototype,"MaxZise",void 0),e=n([s],e)}(p.default);o.default=f,cc._RF.pop()},{"../EventDef":"EventDef","../Extend/Action/Shake":"Shake","../Framework/BaseComp":"BaseComp","../GameMsg/MapFile":"MapFile","../GameMsg/SceneMsg":"SceneMsg","./FileItem":"FileItem"}],wechat:[function(t,e,o){"use strict";cc._RF.push(e,"786e4X+xHFBvqU+NnTaelyq","wechat");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(t,n){"function"==typeof define&&define.amd?define([],n):"object"===(void 0===o?"undefined":i(o))?e.exports=n():t.download=n()})(void 0,function(){return function(t){var e=function(t){wx.getSetting({success:function(e){var o=!1;o=void 0==e.authSetting["scope.writePhotosAlbum"]||e.authSetting["scope.writePhotosAlbum"],t&&t(o)}})},o=t.toTempFilePathSync({x:0,y:0,width:t.width,height:t.height,destWidth:t.width,destHeight:t.height,fileType:"png",quality:1});wx.saveImageToPhotosAlbum({filePath:o,success:function(t){wx.showToast({title:"\u4fdd\u5b58\u6210\u529f"})},fail:function(t){e(function(t){t?wx.showToast({title:"\u4fdd\u5b58\u5931\u8d25",icon:"none"}):wx.showToast({title:"\u6743\u9650\u4e0d\u8db3",icon:"none"})})}})}}),cc._RF.pop()},{}]},{},["Config","CustomItemView","EventDef","Shake","AudioIndex","AudioMsg","ClickAudio","ExButton","ListContent","ListItem","PersistNode","RootView","BaseComp","BaseView","EventMsg","MapFile","MapItemMsg","MapRecordMsg","SceneMsg","SpritesMsg","KeyComp","LocalItem","MapCamera","MapCapture","MapCtrl","MapGround","MapItem","MapView","MiniMap","PondItem","wechat","MenuView","PromptView","SeceltItem","SeceltView","SizeView","FileItem","StartView"]);